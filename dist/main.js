!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,r,o){var i=this,a=e.name,u=e.link;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"_handleImageClick",(function(e){document.querySelector(".popup__place-name").textContent=i._text,i._galleryWindow=document.querySelector(".popup__img"),i._galleryWindow.src=i._link,i._galleryWindow.alt="Photograph of ".concat(i._text),i.handleClickExtension(e)})),t(this,"_handleDelete",(function(){i._element.remove(),i._element=null})),t(this,"_handleLike",(function(e){e.target.classList.toggle("card__like-button_active")})),t(this,"createCard",(function(){i._element=i._cloneTemplate(),i._assignEventListeners();var e=i._element.querySelector(".card__image");return e.src=i._link,e.alt=i._text,i._element.querySelector(".card__text").textContent=i._text,i._element.querySelector(".card__overflow-tooltip").textContent=i._text,i._element})),this._text=a,this._link=u,this.selectTemplate=r,this.handleClickExtension=o}var r,o;return r=n,(o=[{key:"_cloneTemplate",value:function(){return this.selectTemplate.content.querySelector(".card").cloneNode(!0)}},{key:"_assignEventListeners",value:function(){this._element.querySelector(".card__image").addEventListener("click",this._handleImageClick),this._element.querySelector(".button_type_delete").addEventListener("click",this._handleDelete),this._element.querySelector(".card__like-button").addEventListener("click",this._handleLike)}}])&&e(r.prototype,o),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_resetValidation",(function(){var e=r._settings.inputStatus;return r._inputList.forEach((function(t){r._deactivateError(t),t.classList.remove("".concat(e))})),r._controlSubmit(!0),r._element})),o(this,"_deactivateError",(function(e){var t=e.nextElementSibling;t.classList.remove(r._settings.inputErrorActive),t.textContent=""})),o(this,"_activateError",(function(e,t){var n=e.nextElementSibling;n.classList.add(r._settings.inputErrorActive),n.textContent=t})),o(this,"_controlSubmit",(function(e){var t=r._settings,n=t.submitSelector,o=t.disabledButton,i=r._formElement.querySelector(".".concat(n));e?(i.classList.add(o),i.setAttribute("disabled",!0)):(i.classList.remove(o),i.removeAttribute("disabled"))})),o(this,"_checkIfInputValid",(function(e){var t=e.target;t.classList.add(r._settings.inputStatus),t.validity.valid?r._deactivateError(t):r._activateError(t,t.validationMessage);var n=r._inputList.some((function(e){return!e.validity.valid}));return r._controlSubmit(n)})),o(this,"_setEventListeners",(function(){var e=r._settings.formInput;return r._inputList=Array.from(r._formElement.querySelectorAll(".".concat(e))),r._formElement.addEventListener("submit",(function(e){e.preventDefault()})),r._formElement.addEventListener("reset",r._resetValidation),r._inputList.forEach((function(e){e.addEventListener("input",r._checkIfInputValid)})),r._element})),this._settings=n,this._formElement=t}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){return this._setEventListeners()}}])&&r(t.prototype,n),e}(),a=i;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscClose",(function(e){"Escape"===e.code&&(n.close(),n.unsetEventListeners())})),c(this,"_handleBackgroundClose",(function(e){e.target.classList.contains("popup_active")&&n.close()})),this._popup=document.querySelector(t).parentNode}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active")}},{key:"setEventListeners",value:function(){this._popup.querySelector(".button_type_close").addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",this._handleBackgroundClose)}},{key:"unsetEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscClose)}}])&&u(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},d(e,t,n||e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function _(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e,t){var n,r,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){Object.entries(e).forEach((function(e,t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),o=(r[0],r[1]);n._inputList[t].value=o}))},(o="setInputValues")in(r=m(n=i.call(this,e)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n.handleSubmitForm=t,n._form=n._popup.querySelector(".form"),n._inputList=n._popup.querySelectorAll(".form__input"),n}return t=a,(n=[{key:"close",value:function(){d(y(a.prototype),"close",this).call(this),this._form.reset()}},{key:"getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){d(y(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this.handleSubmitForm)}}])&&p(t.prototype,n),a}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function x(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},k(e,t,n||e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function a(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),L(E(n=i.call(this,e)),"_handleEscClose",(function(e){switch(e.code){case"ArrowLeft":n._goLeft(),n._toggleArrow(n._leftArrow);break;case"ArrowRight":n._goRight(),n._toggleArrow(n._rightArrow);break;case"Escape":n.close(),k((t=E(n),S(a.prototype)),"unsetEventListeners",t).call(t)}})),L(E(n),"_navigationAssign",(function(e){n.card=e,n._leftCard=e.previousElementSibling||e.parentNode.lastChild,n._rightCard=e.nextElementSibling||e.parentNode.firstChild})),n._leftArrow=n._popup.querySelector(".navigation-arrow_left"),n._rightArrow=n._popup.querySelector(".navigation-arrow_right"),n._imageWindowPhoto=n._popup.querySelector(".popup__img"),n._imageWindowName=n._popup.querySelector(".popup__place-name"),n}return t=a,(n=[{key:"open",value:function(e){k(S(a.prototype),"open",this).call(this),this._navigationAssign(e.target.parentNode)}},{key:"_goLeft",value:function(){this._imageWindowPhoto.src=this._leftCard.querySelector(".card__image").src,this._imageWindowPhoto.alt=this._leftCard.querySelector(".card__image").alt,this._imageWindowName.textContent=this._leftCard.querySelector(".card__text").textContent,this._navigationAssign(this._leftCard)}},{key:"_goRight",value:function(){this._imageWindowPhoto.src=this._rightCard.querySelector(".card__image").src,this._imageWindowPhoto.alt=this._rightCard.querySelector(".card__image").alt,this._imageWindowName.textContent=this._rightCard.querySelector(".card__text").textContent,this._navigationAssign(this._rightCard)}},{key:"_toggleArrow",value:function(e){e.classList.add("navigation-arrow_animated");var t=1e3*parseFloat(getComputedStyle(e).transitionDuration);setTimeout((function(){return e.classList.remove("navigation-arrow_animated")}),t)}},{key:"setEventListeners",value:function(){k(S(a.prototype),"setEventListeners",this).call(this),this._rightArrow.addEventListener("click",this._goRight.bind(this)),this._leftArrow.addEventListener("click",this._goLeft.bind(this))}}])&&g(t.prototype,n),a}(l);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._tenderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._tenderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&j(t.prototype,n),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._job=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._data={name:this._name.textContent,job:this._job.textContent},this._data}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._name.textContent=t,this._job.textContent=n,this._data=e}}])&&q(t.prototype,n),e}(),P="#w-add",I="#w-edit",B=document.querySelector(".profile__button-edit"),H=document.querySelector(".profile__button-add"),M=document.querySelector(I).querySelector(".form"),V=document.querySelector(P).querySelector(".form"),D={formInput:"form__input",inputStatus:"form__input_status",submitSelector:"button_type_submit",disabledButton:"button_disabled",inputErrorActive:"form__input-error_active"},R=document.querySelector("#card-temp"),T=new A(".profile__name",".profile__job"),W=function(e){var t=new n(e,R,(function(e){Y.open(e)})).createCard();F.addItem(t)},G=new v(I,(function(){T.setUserInfo(G.getInputValues()),G.close()}));G.setEventListeners();var N=new v(P,(function(){var e=N.getInputValues();W(e),N.close()}));N.setEventListeners();var Y=new C("#w-img");Y.setEventListeners(),new a(M,D).enableValidation(),new a(V,D).enableValidation();var F=new O({items:[{name:"Gasadalur, Faroe Islands",link:"https://images.unsplash.com/photo-1520769490916-8c754d52b8e0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{name:"Vũng Tàu, Ba Ria - Vung Tau, Vietnam",link:"https://images.unsplash.com/photo-1583647515542-f129dd697638?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1955&q=80"},{name:"Torres del Paine National Park, Chile",link:"https://images.unsplash.com/photo-1478827387698-1527781a4887?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1950&q=80"},{name:"Budapest, Hungary",link:"https://images.unsplash.com/photo-1541343672885-9be56236302a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=634&q=80"},{name:"San Quirico d'Orcia, Italy",link:"https://images.unsplash.com/photo-1516108317508-6788f6a160e4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1834&q=80"},{name:"Lago di Braies, Italy",link:"https://images.unsplash.com/photo-1482192505345-5655af888cc4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2000&q=80"},{name:"Fujiyoshida, Japan",link:"https://images.unsplash.com/photo-1526481280693-3bfa7568e0f3?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1951&q=80"},{name:"Kyoto, Japan",link:"https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"}],renderer:function(e){W(e)}},".locations");F.renderItems(),B.addEventListener("click",(function(){G.setInputValues(T.getUserInfo()),G.open()})),H.addEventListener("click",(function(){return N.open()}));var U=new PopupWithForm(".popup_add-image",{submitHandler:function(e){var t={name:e.imageTitle,link:e.imageLink},r=new n(t,"#image-template",{handleCardClick:openCardPopup});imagesGenerator.addItem(r.generateCard())}});U.setEventListeners(),addImageBtn.addEventListener("click",(function(){return U.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjLG1CQUFvQixDQUMxRHpFLGNBQWUsU0FBQzBFLEdBQ2QsSUFBTUMsRUFBZSxDQUNuQnRKLEtBQU1xSixFQUFVRSxXQUNoQnRKLEtBQU1vSixFQUFVRyxXQUVWQyxFQUFrQixJQUFJNUosRUFBS3lKLEVBQWMsa0JBQzlDLENBQUVJLGdCQUFpQkMsZ0JBQ3BCQyxnQkFBZ0JuQixRQUFRZ0IsRUFBZ0JJLG1CQUc5Q1YsRUFBY04sb0JBRWRpQixZQUFZeEksaUJBQWlCLFNBQVEsa0JBQUs2SCxFQUFjYixVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwR2FsbGVyeS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8gLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb25zdHJ1Y3RzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2luaXRpYWxDYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIHNlbGVjdFRlbXBsYXRlLCBoYW5kbGVDbGlja0V4dGVuc2lvbikge1xuICAgIHRoaXMuX3RleHQgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuc2VsZWN0VGVtcGxhdGUgPSBzZWxlY3RUZW1wbGF0ZTtcbiAgICB0aGlzLmhhbmRsZUNsaWNrRXh0ZW5zaW9uID0gaGFuZGxlQ2xpY2tFeHRlbnNpb247XG4gIH1cblxuICBfY2xvbmVUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuc2VsZWN0VGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XG4gICAgcmV0dXJuIHRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9oYW5kbGVJbWFnZUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLW5hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xuICAgIHRoaXMuX2dhbGxlcnlXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XG4gICAgdGhpcy5fZ2FsbGVyeVdpbmRvdy5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2dhbGxlcnlXaW5kb3cuYWx0ID0gYFBob3RvZ3JhcGggb2YgJHt0aGlzLl90ZXh0fWA7XG4gICAgdGhpcy5oYW5kbGVDbGlja0V4dGVuc2lvbihldnQpO1xuICB9O1xuXG4gIC8vIGZ1bmN0aW9uICgpe2FkZFBvcHVwLm9wZW4oKX0sIGZhbHNlXG4gIF9oYW5kbGVEZWxldGUgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcbiAgX2hhbmRsZUxpa2UgPSAoZXZ0KSA9PiB7XG4gICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfTtcbiAgX2Fzc2lnbkV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2spO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2RlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fY2xvbmVUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2Fzc2lnbkV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RleHQ7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX292ZXJmbG93LXRvb2x0aXBcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fdGV4dDtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9O1xufVxuIiwiLy9Gb3JtVmFsaWRhdG9yIENsYXNzIC0gPiBBZGRlZFxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuICAvLzw8U1RBUlQ+PnB1YmxpYyBtZXRob2RzIG9mIGZvcm0gdmFsaWRhdGlvbi48PFNUQVJUPj5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9yZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpbnB1dFN0YXR1cyB9ID0gdGhpcy5fc2V0dGluZ3M7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9kZWFjdGl2YXRlRXJyb3IoaW5wdXQpO1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShgJHtpbnB1dFN0YXR1c31gKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jb250cm9sU3VibWl0KHRydWUpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG4gIC8vPDxFTkQ+PnB1YmxpYyBtZXRob2RzIG9mIGZvcm0gdmFsaWRhdGlvbi48PEVORD4+XG4gIC8vPDxTVEFSVD4+IEVycm9yIG1lc3NhZ2VzIGFuZCBidXR0b24gY29udHJvbHMgPDxTVEFSVD4+XG4gIF9kZWFjdGl2YXRlRXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvckZpZWxkID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yRmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckZpZWxkLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcbiAgX2FjdGl2YXRlRXJyb3IgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvckZpZWxkID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yRmllbGQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckZpZWxkLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcbiAgLy9Db250cm9scyB0aGUgc3RhdHVzIG9mIHRoZSBzdWJtaXQgYnV0dG9uLCBnZXRzIGZvcm0gaW5wdXRzIHN0YXR1cyBmcm9tIGNoZWNrSWZJbnB1dFZhbGlkXG4gIF9jb250cm9sU3VibWl0ID0gKGZvcm1TdGF0dXMpID0+IHtcbiAgICBjb25zdCB7IHN1Ym1pdFNlbGVjdG9yLCBkaXNhYmxlZEJ1dHRvbiB9ID0gdGhpcy5fc2V0dGluZ3M7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7c3VibWl0U2VsZWN0b3J9YCk7XG5cbiAgICBpZiAoZm9ybVN0YXR1cykge1xuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoZGlzYWJsZWRCdXR0b24pO1xuICAgICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShkaXNhYmxlZEJ1dHRvbik7XG4gICAgICBzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9O1xuICBfY2hlY2tJZklucHV0VmFsaWQgPSAoZXZ0KSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBldnQudGFyZ2V0O1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRTdGF0dXMpO1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlRXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZUVycm9yKGlucHV0KTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtU3RhdHVzID0gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGl0ZW0pID0+ICFpdGVtLnZhbGlkaXR5LnZhbGlkKTtcbiAgICByZXR1cm4gdGhpcy5fY29udHJvbFN1Ym1pdChmb3JtU3RhdHVzKTtcbiAgfTtcbiAgLy88PEVORD4+IEVycm9yIG1lc3NhZ2VzIGNvbnRyb2wgPDxFTkQ+PlxuICAvLzw8U1RBUlQ+PiBMaXN0ZW5lcnMgY29udHJvbCA8PFNUQVJUPj5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgZm9ybUlucHV0IH0gPSB0aGlzLl9zZXR0aW5ncztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Zm9ybUlucHV0fWApXG4gICAgKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCB0aGlzLl9yZXNldFZhbGlkYXRpb24pO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuX2NoZWNrSWZJbnB1dFZhbGlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfTtcblxuICAvLzw8RU5EPj4gTGlzdGVuZXJzIGNvbnRyb2wgPDxFTkQ+PlxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpLnBhcmVudE5vZGU7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfYWN0aXZlXCIpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmNvZGUgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMudW5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVCYWNrZ3JvdW5kQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfYWN0aXZlXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUJhY2tncm91bmRDbG9zZSlcbiAgfVxuICB1bnNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlU3VibWl0Rm9ybSA9IHN1Ym1pdEhhbmRsZXI7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBnZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX2lucHV0VmFsdWVzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzID0gKHZhbHVlcykgPT4ge1xuICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdLGkpID0+IHtcbiAgICAgIHRoaXMuX2lucHV0TGlzdFtpXS52YWx1ZSA9IHZhbHVlO1xuICAgIH0pXG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5oYW5kbGVTdWJtaXRGb3JtKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwR2FsbGVyeSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fbGVmdEFycm93ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5uYXZpZ2F0aW9uLWFycm93X2xlZnRcIik7XG4gICAgdGhpcy5fcmlnaHRBcnJvdyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubmF2aWdhdGlvbi1hcnJvd19yaWdodFwiKTtcbiAgICB0aGlzLl9pbWFnZVdpbmRvd1Bob3RvID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nXCIpO1xuICAgIHRoaXMuX2ltYWdlV2luZG93TmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BsYWNlLW5hbWVcIik7XG4gIH1cblxuICBvcGVuKGV2dCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9uYXZpZ2F0aW9uQXNzaWduKGV2dC50YXJnZXQucGFyZW50Tm9kZSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIHN3aXRjaCAoZXZ0LmNvZGUpIHtcbiAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcbiAgICAgICAgICB0aGlzLl9nb0xlZnQoKTtcbiAgICAgICAgICB0aGlzLl90b2dnbGVBcnJvdyh0aGlzLl9sZWZ0QXJyb3cpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgICB0aGlzLl9nb1JpZ2h0KCk7XG4gICAgICAgICAgdGhpcy5fdG9nZ2xlQXJyb3codGhpcy5fcmlnaHRBcnJvdyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkVzY2FwZVwiOlxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHN1cGVyLnVuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAgX25hdmlnYXRpb25Bc3NpZ24gPSAoY2FyZCkgPT4ge1xuICAgIC8vaWYgY29uZGl0aW9ucyBmb3IgZXhjZXB0aW9ucyBvZiBubyBzaWJsaW5nIHRvIGdvIHRvIHN0YXJ0L2VuZC5cbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xuICAgIHRoaXMuX2xlZnRDYXJkID0gY2FyZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIHx8IGNhcmQucGFyZW50Tm9kZS5sYXN0Q2hpbGQ7XG4gICAgdGhpcy5fcmlnaHRDYXJkID0gY2FyZC5uZXh0RWxlbWVudFNpYmxpbmcgfHwgY2FyZC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XG4gIH1cblxuICAgX2dvTGVmdCgpIHtcbiAgICB0aGlzLl9pbWFnZVdpbmRvd1Bob3RvLnNyYyA9IHRoaXMuX2xlZnRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjO1xuICAgIHRoaXMuX2ltYWdlV2luZG93UGhvdG8uYWx0ID0gdGhpcy5fbGVmdENhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQ7XG4gICAgdGhpcy5faW1hZ2VXaW5kb3dOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbGVmdENhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpLnRleHRDb250ZW50O1xuICAgIHRoaXMuX25hdmlnYXRpb25Bc3NpZ24odGhpcy5fbGVmdENhcmQpOyAvL3NlbmRzIGRhdGEgdG8gbmF2aWdhdGlvbiB0byB1cGRhdGUgY2FyZCBsb2NhdGlvbi5cbiAgfVxuICAgX2dvUmlnaHQoKSAge1xuICAgIHRoaXMuX2ltYWdlV2luZG93UGhvdG8uc3JjID0gdGhpcy5fcmlnaHRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjO1xuICAgIHRoaXMuX2ltYWdlV2luZG93UGhvdG8uYWx0ID0gdGhpcy5fcmlnaHRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0O1xuICAgIHRoaXMuX2ltYWdlV2luZG93TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX3JpZ2h0Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fbmF2aWdhdGlvbkFzc2lnbih0aGlzLl9yaWdodENhcmQpOyAvL3NlbmRzIGRhdGEgdG8gbmF2aWdhdGlvbiB0byB1cGRhdGUgY2FyZCBsb2NhdGlvbi5cbiAgfVxuICAvLyB0b2dnbGVzIHRoZSBBcnJvdyBhbmltYXRpb24gYnkgYWRkaW5nIGFuZCByZW1vdmluZyBjc3MgY2xhc3MgYW5kIHR1cm5pbmcgb24gdHJhbnNpdGlvbiBmb3IgaXQncyBkdXJhdGlvbi5cbiAgX3RvZ2dsZUFycm93KGUpIHtcbiAgICBlLmNsYXNzTGlzdC5hZGQoXCJuYXZpZ2F0aW9uLWFycm93X2FuaW1hdGVkXCIpO1xuICAgIGNvbnN0IGRlbGF5VGltZSA9XG4gICAgICBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoZSlbXCJ0cmFuc2l0aW9uRHVyYXRpb25cIl0pICogMTAwMDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGUuY2xhc3NMaXN0LnJlbW92ZShcIm5hdmlnYXRpb24tYXJyb3dfYW5pbWF0ZWRcIiksIGRlbGF5VGltZSk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3JpZ2h0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2dvUmlnaHQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fbGVmdEFycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9nb0xlZnQuYmluZCh0aGlzKSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb257XG4gIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjYXJkQ29udGFpbmVyKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl90ZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZENvbnRhaW5lcik7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3RlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlcm5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlcm5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX2RhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgam9iOiAgdGhpcy5fam9iLnRleHRDb250ZW50XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICB9XG4gIHNldFVzZXJJbmZvKG5ld0RhdGEpIHtcbiAgICBjb25zdCB7bmFtZSwgam9ifSA9IG5ld0RhdGE7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gam9iO1xuICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICB9XG59XG4iLCJcbmV4cG9ydCBjb25zdCBnYWxsZXJ5V2luZG93ID0gXCIjdy1pbWdcIjtcbmV4cG9ydCBjb25zdCBhZGRXaW5kb3cgPSBcIiN3LWFkZFwiO1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlV2luZG93ID0gXCIjdy1lZGl0XCI7XG5leHBvcnQgY29uc3QgY2FyZENvbnRhaW5lciA9IFwiLmxvY2F0aW9uc1wiO1xuXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWVkaXRcIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xuXG5leHBvcnQgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVkaXRQcm9maWxlV2luZG93KS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5leHBvcnQgY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkV2luZG93KS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybUlucHV0OiBcImZvcm1fX2lucHV0XCIsXG4gIGlucHV0U3RhdHVzOiBcImZvcm1fX2lucHV0X3N0YXR1c1wiLFxuICBzdWJtaXRTZWxlY3RvcjogXCJidXR0b25fdHlwZV9zdWJtaXRcIixcbiAgZGlzYWJsZWRCdXR0b246IFwiYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JBY3RpdmU6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wXCIpO1xuXG5leHBvcnQgY29uc3QgcmVuZGVyQ2FyZCA9IChuZXdDYXJkKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQobmV3Q2FyZCwgY2FyZFRlbXBsYXRlLCAoZXZ0KSA9PiB7XG4gICAgZ2FsbGVyeVBvcHVwLm9wZW4oZXZ0KTtcbiAgfSk7XG4gIGNvbnN0IHJlbmRlcmVkQ2FyZCA9IGNhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShyZW5kZXJlZENhcmQpO1xufTtcbiIsIi8vSW1wb3J0c1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi9zY3JpcHRzL2luaXRpYWxDYXJkcy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cEdhbGxlcnkgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBHYWxsZXJ5LmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8gLmpzXCI7XG5pbXBvcnQge1xuICBzZXR0aW5ncyxcbiAgYWRkQnV0dG9uLFxuICBlZGl0QnV0dG9uLFxuICBnYWxsZXJ5V2luZG93LFxuICBhZGRXaW5kb3csXG4gIGVkaXRQcm9maWxlV2luZG93LFxuICBjYXJkQ29udGFpbmVyLFxuICBjYXJkVGVtcGxhdGUsXG4gIGFkZEZvcm0sXG4gIGVkaXRGb3JtXG5cbn0gZnJvbSBcIi4uL3NjcmlwdHMvY29uc3RydWN0cy5qc1wiO1xuXG4vL0NyZWF0ZXMgYSB1c2VySW5mbyBvYmplY3QuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX19uYW1lXCIsIFwiLnByb2ZpbGVfX2pvYlwiKTtcbi8vY2FyZFJlbmRlcmluZyBmdW5jdGlvbiBwYXNzZWQgdG8gc2VjdGlvbiBjbGFzcyBmb3IgY2FyZFNlY3Rpb24gYW5kIG5ldyBjYXJkIGNyZWF0b3JzLlxuY29uc3QgY2FyZFJlbmRlcmVyID0gKG5ld0NhcmQpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChuZXdDYXJkLCBjYXJkVGVtcGxhdGUsIChldnQpID0+IHtcbiAgICBnYWxsZXJ5UG9wdXAub3BlbihldnQpO1xuICB9KTtcbiAgY29uc3QgcmVuZGVyZWRDYXJkID0gY2FyZEVsZW1lbnQuY3JlYXRlQ2FyZCgpO1xuXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0ocmVuZGVyZWRDYXJkKTtcbn07XG5cbi8vQ3JlYXRlcyB0aGUgcG9wIHdpdGggdGhlIGVkaXQgZm9ybVxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwRm9ybShlZGl0UHJvZmlsZVdpbmRvdywgKCkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhlZGl0UG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gIGVkaXRQb3B1cC5jbG9zZSgpO1xufSk7XG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9jcmVhdGVzIHBvcHVwIHdpdGggZm9ybSBjb3JyZXNwb25kaW5nIHRvIGFkZCBidXR0b24gd2l0aCBhIGNhbGxiYWNrIGZ1bmN0aW9uO1xuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBGb3JtKGFkZFdpbmRvdywgKCkgPT4ge1xuICBjb25zdCBuZXdDYXJkID0gYWRkUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgY2FyZFJlbmRlcmVyKG5ld0NhcmQpO1xuICBhZGRQb3B1cC5jbG9zZSgpO1xufSk7XG5cbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vQ3JlYXRlcyB0aGUgZ2FsbGVyeSBwb3B1cFxuY29uc3QgZ2FsbGVyeVBvcHVwID0gbmV3IFBvcHVwR2FsbGVyeShnYWxsZXJ5V2luZG93KTtcbmdhbGxlcnlQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL2Zvcm0gVmFsaWRhdGlvblxuY29uc3QgZWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGVkaXRGb3JtLHNldHRpbmdzKTtcbmVkaXRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRGb3JtLHNldHRpbmdzKTtcbmFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vYWRkcyBjYXJkIHNlY3Rpb25cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAobmV3Q2FyZCkgPT4ge1xuICAgICAgY2FyZFJlbmRlcmVyKG5ld0NhcmQpXG4gICAgfSxcbiAgfSxcbiAgY2FyZENvbnRhaW5lclxuKTtcblxuLy9yZW5kZXJzIGNhcmQgc2VjdGlvblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy88PFNUQVJUPj4gYmFzZSBwYWdlIGJ1dHRvbiBsaXN0ZW5lcnMgPDxTVEFSVD4+XG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgZWRpdFBvcHVwLm9wZW4oKTtcbn0pOyAvL2VkaXQgYnV0dG9uIGxpc3RlbmVyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZFBvcHVwLm9wZW4oKSk7IC8vYWRkIGJ1dHRvbiBsaXN0ZW5lclxuLy88PEVORD4+IGJhc2UgcGFnZSBidXR0b24gbGlzdGVuZXJzIDw8RU5EPj5cblxuY29uc3QgYWRkSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2FkZC1pbWFnZVwiLCB7XG4gIHN1Ym1pdEhhbmRsZXI6IChpbWFnZURhdGEpID0+IHtcbiAgICBjb25zdCBuZXdJbWFnZURhdGEgPSB7XG4gICAgICBuYW1lOiBpbWFnZURhdGEuaW1hZ2VUaXRsZSxcbiAgICAgIGxpbms6IGltYWdlRGF0YS5pbWFnZUxpbmtcbiAgICB9O1xuICAgICAgY29uc3QgbmV3SW1hZ2VFbGVtZW50ID0gbmV3IENhcmQobmV3SW1hZ2VEYXRhLCBcIiNpbWFnZS10ZW1wbGF0ZVwiLFxuICAgICAgIHsgaGFuZGxlQ2FyZENsaWNrOiBvcGVuQ2FyZFBvcHVwIH0pO1xuICAgICAgaW1hZ2VzR2VuZXJhdG9yLmFkZEl0ZW0obmV3SW1hZ2VFbGVtZW50LmdlbmVyYXRlQ2FyZCgpKTtcbiAgIH19XG4pO1xuYWRkSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hZGRJbWFnZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+IGFkZEltYWdlUG9wdXAub3BlbigpKVxuXG5cblxuXG5cbiIsIi8vIEFycmF5IG9mIGluaXRpYWwgY2FyZHNcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR2FzYWRhbHVyLCBGYXJvZSBJc2xhbmRzXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyMDc2OTQ5MDkxNi04Yzc1NGQ1MmI4ZTA/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE5NTAmcT04MFwiXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiVsWpbmcgVMOgdSwgQmEgUmlhIC0gVnVuZyBUYXUsIFZpZXRuYW1cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgzNjQ3NTE1NTQyLWYxMjlkZDY5NzYzOD9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTk1NSZxPTgwXCJcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJUb3JyZXMgZGVsIFBhaW5lIE5hdGlvbmFsIFBhcmssIENoaWxlXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ3ODgyNzM4NzY5OC0xNTI3NzgxYTQ4ODc/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE5NTAmcT04MFwiXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiQnVkYXBlc3QsIEh1bmdhcnlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQxMzQzNjcyODg1LTliZTU2MjM2MzAyYT9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NjM0JnE9ODBcIlxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlNhbiBRdWlyaWNvIGQnT3JjaWEsIEl0YWx5XCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUxNjEwODMxNzUwOC02Nzg4ZjZhMTYwZTQ/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE4MzQmcT04MFwiXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXMsIEl0YWx5XCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ4MjE5MjUwNTM0NS01NjU1YWY4ODhjYzQ/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTIwMDAmcT04MFwiXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiRnVqaXlvc2hpZGEsIEphcGFuXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyNjQ4MTI4MDY5My0zYmZhNzU2OGUwZjM/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE5NTEmcT04MFwiXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiS3lvdG8sIEphcGFuXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0NTU2OTM0MS05ZWI4YjMwOTc5ZDk/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE5NTAmcT04MFwiXG4gIH0sXG5dO1xuXG5leHBvcnQge2luaXRpYWxDYXJkc307XG4iXSwibmFtZXMiOlsiQ2FyZCIsInNlbGVjdFRlbXBsYXRlIiwiaGFuZGxlQ2xpY2tFeHRlbnNpb24iLCJuYW1lIiwibGluayIsImV2dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiX3RleHQiLCJfZ2FsbGVyeVdpbmRvdyIsInNyYyIsIl9saW5rIiwiYWx0IiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2xvbmVUZW1wbGF0ZSIsIl9hc3NpZ25FdmVudExpc3RlbmVycyIsImNhcmRJbWFnZSIsInRoaXMiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZSIsIl9oYW5kbGVMaWtlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50Iiwic2V0dGluZ3MiLCJpbnB1dFN0YXR1cyIsIl9zZXR0aW5ncyIsIl9pbnB1dExpc3QiLCJmb3JFYWNoIiwiaW5wdXQiLCJfZGVhY3RpdmF0ZUVycm9yIiwiX2NvbnRyb2xTdWJtaXQiLCJlcnJvckZpZWxkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiaW5wdXRFcnJvckFjdGl2ZSIsIm1lc3NhZ2UiLCJhZGQiLCJmb3JtU3RhdHVzIiwic3VibWl0U2VsZWN0b3IiLCJkaXNhYmxlZEJ1dHRvbiIsInN1Ym1pdEJ1dHRvbiIsIl9mb3JtRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfYWN0aXZhdGVFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIml0ZW0iLCJmb3JtSW5wdXQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJldmVudERlZmF1bHQiLCJfcmVzZXRWYWxpZGF0aW9uIiwiX2NoZWNrSWZJbnB1dFZhbGlkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY29kZSIsImNsb3NlIiwidW5zZXRFdmVudExpc3RlbmVycyIsImNvbnRhaW5zIiwiX3BvcHVwIiwicGFyZW50Tm9kZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlQmFja2dyb3VuZENsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJ2YWx1ZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiaSIsInZhbHVlIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9mb3JtIiwicmVzZXQiLCJfaW5wdXRWYWx1ZXMiLCJQb3B1cEdhbGxlcnkiLCJfZ29MZWZ0IiwiX3RvZ2dsZUFycm93IiwiX2xlZnRBcnJvdyIsIl9nb1JpZ2h0IiwiX3JpZ2h0QXJyb3ciLCJjYXJkIiwiX2xlZnRDYXJkIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImxhc3RDaGlsZCIsIl9yaWdodENhcmQiLCJmaXJzdENoaWxkIiwiX2ltYWdlV2luZG93UGhvdG8iLCJfaW1hZ2VXaW5kb3dOYW1lIiwiX25hdmlnYXRpb25Bc3NpZ24iLCJlIiwiZGVsYXlUaW1lIiwicGFyc2VGbG9hdCIsImdldENvbXB1dGVkU3R5bGUiLCJzZXRUaW1lb3V0IiwiU2VjdGlvbiIsImNhcmRDb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3RlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiVXNlckluZm8iLCJ1c2VybmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwiX25hbWUiLCJfam9iIiwiX2RhdGEiLCJqb2IiLCJuZXdEYXRhIiwiYWRkV2luZG93IiwiZWRpdFByb2ZpbGVXaW5kb3ciLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZWRpdEZvcm0iLCJhZGRGb3JtIiwiY2FyZFRlbXBsYXRlIiwidXNlckluZm8iLCJjYXJkUmVuZGVyZXIiLCJuZXdDYXJkIiwicmVuZGVyZWRDYXJkIiwiZ2FsbGVyeVBvcHVwIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJlZGl0UG9wdXAiLCJzZXRVc2VySW5mbyIsImdldElucHV0VmFsdWVzIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRQb3B1cCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyIsInNldElucHV0VmFsdWVzIiwiZ2V0VXNlckluZm8iLCJhZGRJbWFnZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImltYWdlRGF0YSIsIm5ld0ltYWdlRGF0YSIsImltYWdlVGl0bGUiLCJpbWFnZUxpbmsiLCJuZXdJbWFnZUVsZW1lbnQiLCJoYW5kbGVDYXJkQ2xpY2siLCJvcGVuQ2FyZFBvcHVwIiwiaW1hZ2VzR2VuZXJhdG9yIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSW1hZ2VCdG4iXSwic291cmNlUm9vdCI6IiJ9