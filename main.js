!function(){"use strict";var t={849:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o},t.exports.default=t.exports,t.exports.__esModule=!0},600:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},491:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},946:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},33:function(t){function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t},t.exports.default=t.exports,t.exports.__esModule=!0},837:function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},97:function(t,e,n){var o=n(945);function r(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=r=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t,e,n){var r=o(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),r(e,n,i||e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},323:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},22:function(t,e,n){var o=n(596);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},424:function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},258:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){u=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw r}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0},284:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},246:function(t,e,n){var o=n(924).default,r=n(491);t.exports=function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},337:function(t){t.exports=function(t){throw new TypeError('"'+t+'" is read-only')},t.exports.default=t.exports,t.exports.__esModule=!0},596:function(t){function e(n,o){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,o)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},934:function(t,e,n){var o=n(600),r=n(258),i=n(288),a=n(284);t.exports=function(t,e){return o(t)||r(t,e)||i(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},945:function(t,e,n){var o=n(323);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},924:function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},288:function(t,e,n){var o=n(849);t.exports=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},240:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=function(t,e){return fetch(t,e).then((function(t){return t.ok?t.json():Promise.reject("Failed with status:( ".concat(t.status," ").concat(t.statusText,")"))})).catch((function(t){return console.log(t)}))},u=function(){function t(e){var n=e.groupId,o=e.apiKey,i=e.baseUrl;(0,r.default)(this,t),this.groupId=n,this.apiKey=o,this.baseUrl=i}return(0,i.default)(t,[{key:"getInitialCards",value:function(){return a("".concat(this.baseUrl).concat(this.groupId,"/cards"),{headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"}})}},{key:"postNewCard",value:function(t){return a("".concat(this.baseUrl).concat(this.groupId,"/cards/"),{method:"POST",headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t.name),link:"".concat(t.link)})})}},{key:"deleteCardPost",value:function(t){return a("".concat(this.baseUrl).concat(this.groupId,"/cards/").concat(t),{method:"DELETE",headers:{authorization:"".concat(this.apiKey)}})}},{key:"getProfile",value:function(){return a("".concat(this.baseUrl).concat(this.groupId,"/users/me"),{headers:{authorization:"".concat(this.apiKey)}})}},{key:"updateProfile",value:function(t){var e=t.name,n=t.about;return a("".concat(this.baseUrl).concat(this.groupId,"/users/me"),{method:"PATCH",headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(e),about:"".concat(n),_id:"".concat(this.apiKey),cohort:"".concat(this.groupId)})})}},{key:"updateProfilePhoto",value:function(t){return a("".concat(this.baseUrl).concat(this.groupId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({avatar:"".concat(t)})})}},{key:"likePhoto",value:function(t){return a("".concat(this.baseUrl).concat(this.groupId,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:"".concat(this.apiKey)}})}},{key:"dislikePhoto",value:function(t){return a("".concat(this.baseUrl).concat(this.groupId,"/cards/likes/").concat(t),{method:"Delete",headers:{authorization:"".concat(this.apiKey)}})}}]),t}();e.default=u},578:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(337)),i=o(n(946)),a=o(n(33)),u=o(n(837)),l=(o(n(240)),function(){function t(e,n,o,a,l,s){var c=this;(0,i.default)(this,t),(0,u.default)(this,"tooltipCheck",(function(t){var e=c._element.querySelector(".card__overflow-tooltip");e.offsetWidth<e.scrollWidth&&(c._element.remove(e),(0,r.default)("tooltip"))})),(0,u.default)(this,"createCard",(function(){c._element=c._cloneTemplate(),c._assignEventListeners(),c.likeCounter=c._element.querySelector(".card__like-label"),c.likes&&0!==c.likes.length&&(c.likeCounter.style.visibility="visible",c._element.querySelector(".card__like-label").textContent=c.likes.length,c.likes.some((function(t){return t._id===c._myId}))&&c._element.querySelector(".card__like-button").classList.add("card__like-button_active")),c._ownerId!==c._myId&&(c._element.querySelector(".button_type_delete").style.display="none");var t=c._element.querySelector(".card__image");return t.src=c._link,t.alt=c._text,c._element.querySelector(".card__text").textContent=c._text,c._element})),this._text=e.name,this._link=e.link,this.selectTemplate=n,this._handleImageClick=o,this.cardID=e._id,this.likes=e.likes,this._handleServerDelete=a,this._serverLike=l,this._ownerId=e.owner._id||void 0,this._myId=s}return(0,a.default)(t,[{key:"_cloneTemplate",value:function(){return this.selectTemplate.content.querySelector(".card").cloneNode(!0)}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_handleLike",value:function(t){return this.likes!==t.likes&&(this.likes=t.likes),this.likeCounter.textContent=this.likes.length,this.likeCounter.style.visibility=this.likes.length?"visible":"hidden",this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active"),this.likes}},{key:"_assignEventListeners",value:function(){var t=this;this._element.querySelector(".card__image").addEventListener("click",this._handleImageClick),this._element.querySelector(".button_type_delete").addEventListener("click",(function(){return t._handleServerDelete(t.cardID)})),this._element.querySelector(".card__like-button").addEventListener("click",(function(){return t._serverLike(t.cardID)}))}},{key:"getId",value:function(){return this.cardID}}]),t}());e.default=l},383:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=o(n(837)),u=function(){function t(e,n){var o=this;(0,r.default)(this,t),(0,a.default)(this,"_resetValidation",(function(){var t=o._settings.inputStatus;return o._inputList.forEach((function(e){o._deactivateError(e),e.classList.remove("".concat(t))})),o._controlSubmit(!0),o._element})),(0,a.default)(this,"_deactivateError",(function(t){var e=t.nextElementSibling;e.classList.remove(o._settings.inputErrorActive),e.textContent=""})),(0,a.default)(this,"_activateError",(function(t,e){var n=t.nextElementSibling;n.classList.add(o._settings.inputErrorActive),n.textContent=e})),(0,a.default)(this,"_controlSubmit",(function(t){var e=o._settings,n=e.submitSelector,r=e.disabledButton,i=o._formElement.querySelector(".".concat(n));t?(i.classList.add(r),i.setAttribute("disabled",!0)):(i.classList.remove(r),i.removeAttribute("disabled"))})),(0,a.default)(this,"_checkIfInputValid",(function(t){var e=t.target;e.classList.add(o._settings.inputStatus),e.validity.valid?o._deactivateError(e):o._activateError(e,e.validationMessage);var n=o._inputList.some((function(t){return!t.validity.valid}));return o._controlSubmit(n)})),(0,a.default)(this,"_setEventListeners",(function(){var t=o._settings.formInput;return o._inputList=Array.from(o._formElement.querySelectorAll(".".concat(t))),o._formElement.addEventListener("submit",(function(t){t.preventDefault()})),o._formElement.addEventListener("reset",o._resetValidation),o._inputList.forEach((function(t){t.addEventListener("input",o._checkIfInputValid)})),o._element})),this._settings=n,this._formElement=e}return(0,i.default)(t,[{key:"enableValidation",value:function(){return this._setEventListeners()}}]),t}();e.default=u},4:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=o(n(837)),u=function(){function t(e){var n=this;(0,r.default)(this,t),(0,a.default)(this,"_handleEscClose",(function(t){"Escape"===t.code&&n.close()})),(0,a.default)(this,"_handleBackgroundClose",(function(t){t.target.classList.contains("popup_active")&&n.close()})),this._popup=document.querySelector(e).parentNode}return(0,i.default)(t,[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),this.unsetEventListeners()}},{key:"setEventListeners",value:function(){this._popup.querySelector(".button_type_close").addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",this._handleBackgroundClose)}},{key:"unsetEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscClose)}}]),t}();e.default=u},242:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=o(n(97)),u=o(n(22)),l=o(n(246)),s=o(n(323));var c=function(t){(0,u.default)(c,t);var e,n,o=(e=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return(0,l.default)(this,t)});function c(t){return(0,r.default)(this,c),o.call(this,t)}return(0,i.default)(c,[{key:"setFunction",value:function(t){this.setSubmitHandler=t}},{key:"open",value:function(){(0,a.default)((0,s.default)(c.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;(0,a.default)((0,s.default)(c.prototype),"setEventListeners",this).call(this),this._popup.querySelector(".button_type_submit").addEventListener("click",(function(){return t.setSubmitHandler()}))}}]),c}(o(n(4)).default);e.default=c},312:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=o(n(491)),u=o(n(97)),l=o(n(22)),s=o(n(246)),c=o(n(323)),d=o(n(837));var f=function(t){(0,l.default)(f,t);var e,n,o=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return(0,s.default)(this,t)});function f(t,e){var n;return(0,r.default)(this,f),n=o.call(this,t),(0,d.default)((0,a.default)(n),"setInputValues",(function(t){for(var e=0;e<n._inputList.length;e++)t["".concat(n._inputList[e].name)]&&(n._inputList[e].value=t["".concat(n._inputList[e].name)]);return n._inputList})),n.handleSubmitForm=e,n._form=n._popup.querySelector(".form"),n._inputList=n._form.querySelectorAll(".form__input"),n}return(0,i.default)(f,[{key:"close",value:function(){(0,u.default)((0,c.default)(f.prototype),"close",this).call(this),this._form.reset()}},{key:"getInputValues",value:function(){var t=this;return this._inputValues={},this._inputList.forEach((function(e){t._inputValues[e.name]=e.value})),this._inputValues}},{key:"setEventListeners",value:function(){(0,u.default)((0,c.default)(f.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this.handleSubmitForm)}}]),f}(o(n(4)).default);e.default=f},591:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=o(n(491)),u=o(n(97)),l=o(n(22)),s=o(n(246)),c=o(n(323)),d=o(n(837));var f=function(t){(0,l.default)(f,t);var e,n,o=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return(0,s.default)(this,t)});function f(t){var e;return(0,r.default)(this,f),e=o.call(this,t),(0,d.default)((0,a.default)(e),"_handleEscClose",(function(t){switch(t.code){case"ArrowLeft":e._leftArrow&&(e._goLeft(),e._toggleArrow(e._leftArrow));break;case"ArrowRight":e._rightArrow&&(e._goRight(),e._toggleArrow(e._rightArrow));break;case"Escape":e.close()}})),(0,d.default)((0,a.default)(e),"_navigationAssign",(function(t){e.card=t,e._leftCard=t.previousElementSibling||t.parentNode.lastChild,e._rightCard=t.nextElementSibling||t.parentNode.firstChild})),e._leftArrow=e._popup.querySelector(".navigation-arrow_left"),e._rightArrow=e._popup.querySelector(".navigation-arrow_right"),e._imageWindowPhoto=e._popup.querySelector(".popup__img"),e._imageWindowName=e._popup.querySelector(".popup__place-name"),e}return(0,i.default)(f,[{key:"open",value:function(t){if((0,u.default)((0,c.default)(f.prototype),"open",this).call(this),t){var e=t.target.parentNode,n=e.querySelector(".card__text"),o=e.querySelector(".card__image");this._imageWindowName.textContent=n.textContent,this._imageWindowPhoto.src=o.src,this._imageWindowPhoto.alt="Photograph of ".concat(n.textContent),this._navigationAssign(e)}else this._imageWindowPhoto.src=document.querySelector(".profile__photo").src,this._imageWindowPhoto.alt="Profile photo"}},{key:"_goLeft",value:function(){this._imageWindowPhoto.src=this._leftCard.querySelector(".card__image").src,this._imageWindowPhoto.alt=this._leftCard.querySelector(".card__image").alt,this._imageWindowName.textContent=this._leftCard.querySelector(".card__text").textContent,this._navigationAssign(this._leftCard)}},{key:"_goRight",value:function(){this._imageWindowPhoto.src=this._rightCard.querySelector(".card__image").src,this._imageWindowPhoto.alt=this._rightCard.querySelector(".card__image").alt,this._imageWindowName.textContent=this._rightCard.querySelector(".card__text").textContent,this._navigationAssign(this._rightCard)}},{key:"_toggleArrow",value:function(t){t.classList.add("navigation-arrow_animated");var e=1e3*parseFloat(getComputedStyle(t).transitionDuration);setTimeout((function(){return t.classList.remove("navigation-arrow_animated")}),e)}},{key:"setEventListeners",value:function(){(0,u.default)((0,c.default)(f.prototype),"setEventListeners",this).call(this),this._leftArrow&&this._rightArrow&&(this._rightArrow.addEventListener("click",this._goRight.bind(this)),this._leftArrow.addEventListener("click",this._goLeft.bind(this)))}}]),f}(o(n(4)).default);e.default=f},411:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=function(){function t(e,n){var o=e.items,i=e.renderer;(0,r.default)(this,t),this._items=o,this._tenderer=i,this._container=document.querySelector(n)}return(0,i.default)(t,[{key:"renderItems",value:function(t){var e=this;t?t.forEach((function(t){return e._tenderer(t)})):this._items.forEach((function(t){return e._tenderer(t)}))}},{key:"addItem",value:function(t,e){"prepend"==e||null==e?this._container.prepend(t):"append"==e&&this._container.append(t)}}]),t}();e.default=a},393:function(t,e,n){var o=n(424);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(946)),i=o(n(33)),a=function(){function t(e,n,o){(0,r.default)(this,t),this._name=document.querySelector(e),this._about=document.querySelector(n),this._avatar=document.querySelector(o),this._data={}}return(0,i.default)(t,[{key:"getUserInfo",value:function(){return this._data.avatar=this._avatar.src,this._data.name=this._name.textContent,this._data.about=this._about.textContent,this._data}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,o=t.avatar,r=t._id;return this._name.textContent=e,this._about.textContent=n,o&&(this._avatar.src=o),r&&(this._data._id=r),this._data}}]),t}();e.default=a},715:function(t,e){function n(t,e){return/\w*e\b/.test(t)?/\w*e\b/.exec(t).toString().replace(/\w\b/,e):button.textContent.toString()+e}Object.defineProperty(e,"__esModule",{value:!0}),e.loader=void 0,e.loader=function(t){var e=t.dots,o=t.completeTimeDelay,r=t.buttonSelector,i=void 0===r?".popup_active .button_type_submit":r,a=t.clickHandler,u=t.callbackEnd,l=void 0===u?function(){}:u,s=(t.onError,e.interval),c=e.count,d=document.querySelector(i),f=d.textContent.toString(),p=n(f,"ing"),_=n(f,"ed"),h=setInterval((function(){d.textContent=d.textContent.length>p.length+c?"".concat(p):d.textContent+"."}),s);a().then((function(t){d.setAttribute("disabled",!0),clearInterval(h),d.textContent="".concat(_," successfully")})).catch((function(t){d.textContent="Failed",setTimeout("",2*o),clearInterval(h)})).finally((function(){setTimeout((function(){l()}),o),setTimeout((function(){d.textContent="".concat(f),d.removeAttribute("disabled")}),2*o)}))}},853:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.cardTemplate=e.settings=e.addForm=e.editProfilePictureForm=e.editForm=e.enlargeImageButton=e.editImageButton=e.addButton=e.editButton=e.cardContainer=e.largeProfileImageWindow=e.editProfilePictureWindow=e.editProfileWindow=e.addWindow=e.galleryWindow=void 0,e.galleryWindow="#w-img";var n="#w-add";e.addWindow=n;var o="#w-edit";e.editProfileWindow=o;var r="#w-editpic";e.editProfilePictureWindow=r,e.largeProfileImageWindow="#w-piclrg",e.cardContainer=".locations";var i=document.querySelector(".profile__button-edit");e.editButton=i;var a=document.querySelector(".profile__button-add");e.addButton=a;var u=document.querySelector(".button_type_edit-profile-image");e.editImageButton=u;var l=document.querySelector(".button_type_enlarge-profile-image");e.enlargeImageButton=l;var s=document.querySelector(o).querySelector(".form");e.editForm=s;var c=document.querySelector(r).querySelector(".form");e.editProfilePictureForm=c;var d=document.querySelector(n).querySelector(".form");e.addForm=d,e.settings={formInput:"form__input",inputStatus:"form__input_status",submitSelector:"button_type_submit",disabledButton:"button_disabled",inputErrorActive:"form__input-error_active"};var f=document.querySelector("#card-temp");e.cardTemplate=f},640:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.initialCards=void 0,e.initialCards=[{name:"Gasadalur, Faroe Islands",link:"https://images.unsplash.com/photo-1520769490916-8c754d52b8e0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"},{name:"Vũng Tàu, Ba Ria - Vung Tau, Vietnam",link:"https://images.unsplash.com/photo-1583647515542-f129dd697638?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1955&q=80"},{name:"Torres del Paine National Park, Chile",link:"https://images.unsplash.com/photo-1478827387698-1527781a4887?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1950&q=80"},{name:"Budapest, Hungary",link:"https://images.unsplash.com/photo-1541343672885-9be56236302a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=634&q=80"},{name:"San Quirico d'Orcia, Italy",link:"https://images.unsplash.com/photo-1516108317508-6788f6a160e4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1834&q=80"},{name:"Lago di Braies, Italy",link:"https://images.unsplash.com/photo-1482192505345-5655af888cc4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2000&q=80"},{name:"Fujiyoshida, Japan",link:"https://images.unsplash.com/photo-1526481280693-3bfa7568e0f3?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1951&q=80"},{name:"Kyoto, Japan",link:"https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"}]},684:function(t,e,n){n.r(e)}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t=n(424),e=t(n(934));n(684);var o=n(640),r=t(n(578)),i=t(n(383)),a=t(n(312)),u=t(n(591)),l=t(n(242)),s=t(n(411)),c=t(n(393)),d=t(n(240)),f=n(853),p=n(715),_=function(t){var e=t.querySelector(".card__overflow-tooltip"),n=t.querySelector(".card__text");return n.offsetWidth<n.scrollWidth?e.textContent=n.textContent:(e.remove(),e=null),t},h=new d.default({baseUrl:"https://around.nomoreparties.co/v1/",apiKey:"69483cc0-2fd4-4d47-b549-ff7c13f67c88",groupId:"group-12"}),v=new c.default(".profile__name",".profile__about",".profile__photo");Promise.all([h.getProfile(),h.getInitialCards()]).then((function(t){var n=(0,e.default)(t,2),o=n[0],r=n[1];v.setUserInfo(o),S.renderItems(r)}));var m=new l.default("#w-confirm");m.setEventListeners();var y=function(t){var e=new r.default(t,f.cardTemplate,(function(t){w.open(t)}),(function(t){m.open(),m.setFunction((function(){(0,p.loader)({dots:{interval:100,count:4},completeTimeDelay:250,callbackEnd:function(){return m.close()},clickHandler:function(){return h.deleteCardPost(t).then(e.deleteCard())}})}))}),(function(t){e.likes.some((function(t){return t._id==v._data._id}))?h.dislikePhoto(t).then((function(t){return e._handleLike(t)})):h.likePhoto(t).then((function(t){return e._handleLike(t)}))}),v._data._id);return e.createCard()},x=new a.default(f.editProfileWindow,(function(){v.setUserInfo(x.getInputValues()),(0,p.loader)({dots:{interval:40,count:4},completeTimeDelay:400,callbackEnd:function(){return x.close()},clickHandler:function(){return h.updateProfile(x.getInputValues())}})}));x.setEventListeners();var g=new a.default(f.editProfilePictureWindow,(function(){(0,p.loader)({dots:{interval:60,count:4},completeTimeDelay:400,callbackEnd:function(){return g.close()},clickHandler:function(){return h.updateProfilePhoto(g.getInputValues().avatar).then((function(t){return v.setUserInfo(t)}))}})}));g.setEventListeners();var b=new a.default(f.addWindow,(function(){var t=b.getInputValues();(0,p.loader)({dots:{interval:60,count:4},completeTimeDelay:400,clickHandler:function(){return h.postNewCard(t).then((function(e){t=y(e),S.addItem(t),_(t),b.close()}))}})}));b.setEventListeners();var w=new u.default(f.galleryWindow);w.setEventListeners();var k=new u.default(f.largeProfileImageWindow);k.setEventListeners(),new i.default(f.editForm,f.settings).enableValidation(),new i.default(f.addForm,f.settings).enableValidation(),new i.default(f.editProfilePictureForm,f.settings).enableValidation();var S=new s.default({items:o.initialCards,renderer:function(t){t=y(t),S.addItem(t,"append"),_(t)}},f.cardContainer);f.editButton.addEventListener("click",(function(){x.setInputValues(v.getUserInfo()),x.open()})),f.addButton.addEventListener("click",(function(){return b.open()})),f.editImageButton.addEventListener("click",(function(){g.setInputValues(v.getUserInfo()),g.open()})),f.enlargeImageButton.addEventListener("click",(function(){return k.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxFQUFhMUosR0FDdkJzSixFQUFZeUIsUUFBUXBCLEdBQ3BCaEIsRUFBYWdCLEdBQ2JrQixFQUFTdEksaUJBS2pCc0ksRUFBU3BCLG9CQUdULElBQU1JLEVBQWUsSUFBSWxHLEVBQUFBLFFBQWFxSCxFQUFBQSxlQUN0Q25CLEVBQWFKLG9CQUViLElBQU13QixFQUFlLElBQUl0SCxFQUFBQSxRQUFhdUgsRUFBQUEseUJBQ3RDRCxFQUFheEIsb0JBRVMsSUFBSXRKLEVBQUFBLFFBQWM2SCxFQUFBQSxTQUFVM0gsRUFBQUEsVUFDcEM4SyxtQkFFTyxJQUFJaEwsRUFBQUEsUUFBYytILEVBQUFBLFFBQVM3SCxFQUFBQSxVQUNuQzhLLG1CQUVZLElBQUloTCxFQUFBQSxRQUFjOEgsRUFBQUEsdUJBQXdCNUgsRUFBQUEsVUFDbEQ4SyxtQkFJakIsSUFBTTdCLEVBQWMsSUFBSXRFLEVBQUFBLFFBQ3RCLENBQ0VFLE1BQU9rRSxFQUFBQSxhQUNQakUsU0FBVSxTQUFDd0UsR0FDVEEsRUFBVUQsRUFBYUMsR0FDdkJMLEVBQVl5QixRQUFRcEIsRUFBUyxVQUM3QmhCLEVBQWFnQixLQUdqQjFFLEVBQUFBLGVBSUYyQyxFQUFBQSxXQUFXMUgsaUJBQWlCLFNBQVMsV0FDbkNzSyxFQUFVWSxlQUFlckMsRUFBU3NDLGVBQ2xDYixFQUFVVixVQUdaakMsRUFBQUEsVUFBVTNILGlCQUFpQixTQUFTLGtCQUFNMkssRUFBU2YsVUFFbkRoQyxFQUFBQSxnQkFBZ0I1SCxpQkFBaUIsU0FBUyxXQUN4Q3lLLEVBQWNTLGVBQWVyQyxFQUFTc0MsZUFDdENWLEVBQWNiLFVBR2hCL0IsRUFBQUEsbUJBQW1CN0gsaUJBQWlCLFNBQVMsa0JBQU0rSyxFQUFhbkIsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhIb2xlcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvbm9uSXRlcmFibGVSZXN0LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9yZWFkT25seUVycm9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zZXRQcm90b3R5cGVPZi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc3VwZXJQcm9wQmFzZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwR2FsbGVyeS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8gLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvbG9hZGVyLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2luaXRpYWxDYXJkcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykge1xuICAgIGFycjJbaV0gPSBhcnJbaV07XG4gIH1cblxuICByZXR1cm4gYXJyMjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlMaWtlVG9BcnJheTtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aEhvbGVzO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjaztcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgc3VwZXJQcm9wQmFzZSA9IHJlcXVpcmUoXCIuL3N1cGVyUHJvcEJhc2UuanNcIik7XG5cbmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfZ2V0ID0gUmVmbGVjdC5nZXQ7XG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gc3VwZXJQcm9wQmFzZSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgIGlmICghYmFzZSkgcmV0dXJuO1xuICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTtcblxuICAgICAgaWYgKGRlc2MuZ2V0KSB7XG4gICAgICAgIHJldHVybiBkZXNjLmdldC5jYWxsKHJlY2VpdmVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlc2MudmFsdWU7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2dldDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBtb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9zZXRQcm90b3R5cGVPZi5qc1wiKTtcblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbmhlcml0cztcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0O1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcbiAgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdO1xuXG4gIGlmIChfaSA9PSBudWxsKSByZXR1cm47XG4gIHZhciBfYXJyID0gW107XG4gIHZhciBfbiA9IHRydWU7XG4gIHZhciBfZCA9IGZhbHNlO1xuXG4gIHZhciBfcywgX2U7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKF9pID0gX2kuY2FsbChhcnIpOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZCA9IHRydWU7XG4gICAgX2UgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gX2Fycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5TGltaXQ7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVSZXN0O1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mXCIpW1wiZGVmYXVsdFwiXTtcblxudmFyIGFzc2VydFRoaXNJbml0aWFsaXplZCA9IHJlcXVpcmUoXCIuL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qc1wiKTtcblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcbiAgfVxuXG4gIHJldHVybiBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm47XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX3JlYWRPbmx5RXJyb3IobmFtZSkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlwiICsgbmFtZSArIFwiXFxcIiBpcyByZWFkLW9ubHlcIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3JlYWRPbmx5RXJyb3I7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9zZXRQcm90b3R5cGVPZjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgYXJyYXlXaXRoSG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhIb2xlcy5qc1wiKTtcblxudmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0ID0gcmVxdWlyZShcIi4vaXRlcmFibGVUb0FycmF5TGltaXQuanNcIik7XG5cbnZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5LmpzXCIpO1xuXG52YXIgbm9uSXRlcmFibGVSZXN0ID0gcmVxdWlyZShcIi4vbm9uSXRlcmFibGVSZXN0LmpzXCIpO1xuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIGFycmF5V2l0aEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IG5vbkl0ZXJhYmxlUmVzdCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9zbGljZWRUb0FycmF5O1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL2dldFByb3RvdHlwZU9mLmpzXCIpO1xuXG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3N1cGVyUHJvcEJhc2U7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIF90eXBlb2Yob2JqKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdHlwZW9mO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheS5qc1wiKTtcblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXk7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiY29uc3QgY3VzdG9tRmV0Y2ggPSAodXJsLCBwcm9wZXJ0aWVzKSA9PiB7XG4gIHJldHVybiBmZXRjaCh1cmwsIHByb3BlcnRpZXMpXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgIGBGYWlsZWQgd2l0aCBzdGF0dXM6KCAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSlgXG4gICAgICApO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgZ3JvdXBJZCwgYXBpS2V5LCBiYXNlVXJsIH0pIHtcbiAgICB0aGlzLmdyb3VwSWQgPSBncm91cElkO1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVybH0ke3RoaXMuZ3JvdXBJZH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IGAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHBvc3ROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVybH0ke3RoaXMuZ3JvdXBJZH0vY2FyZHMvYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBgJHtjYXJkRGF0YS5uYW1lfWAsXG4gICAgICAgIGxpbms6IGAke2NhcmREYXRhLmxpbmt9YCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZFBvc3QoY2FyZElkKSB7XG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVybH0ke3RoaXMuZ3JvdXBJZH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0aGlzLmFwaUtleX1gLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFByb2ZpbGUoKSB7XG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVybH0ke3RoaXMuZ3JvdXBJZH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IGAke3RoaXMuYXBpS2V5fWAsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVXJsfSR7dGhpcy5ncm91cElkfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0aGlzLmFwaUtleX1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGAke25hbWV9YCxcbiAgICAgICAgYWJvdXQ6IGAke2Fib3V0fWAsXG4gICAgICAgIF9pZDogYCR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgY29ob3J0OiBgJHt0aGlzLmdyb3VwSWR9YCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZVBob3RvKGF2YXRhckxpbmspIHtcbiAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVXJsfSR7dGhpcy5ncm91cElkfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGAke2F2YXRhckxpbmt9YCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgbGlrZVBob3RvKGNhcmRJZCkge1xuICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVcmx9JHt0aGlzLmdyb3VwSWR9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogYCR7dGhpcy5hcGlLZXl9YCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBkaXNsaWtlUGhvdG8oY2FyZElkKSB7XG4gICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVybH0ke3RoaXMuZ3JvdXBJZH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRlbGV0ZVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBgJHt0aGlzLmFwaUtleX1gLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IEFwaSBmcm9tIFwiLi9BcGlcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhcmREYXRhLFxuICAgIHNlbGVjdFRlbXBsYXRlLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgc2VydmVyRGVsZXRlLFxuICAgIHNlcnZlckxpa2UsXG4gICAgbXlJZFxuICApIHtcbiAgICB0aGlzLl90ZXh0ID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLnNlbGVjdFRlbXBsYXRlID0gc2VsZWN0VGVtcGxhdGU7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5jYXJkSUQgPSBjYXJkRGF0YS5faWQ7XG4gICAgdGhpcy5saWtlcyA9IGNhcmREYXRhLmxpa2VzO1xuICAgIHRoaXMuX2hhbmRsZVNlcnZlckRlbGV0ZSA9IHNlcnZlckRlbGV0ZTtcbiAgICB0aGlzLl9zZXJ2ZXJMaWtlID0gc2VydmVyTGlrZTtcbiAgICB0aGlzLl9vd25lcklkID0gY2FyZERhdGEub3duZXIuX2lkIHx8IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9teUlkID0gbXlJZDtcbiAgfVxuXG4gIF9jbG9uZVRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5zZWxlY3RUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbiAgICByZXR1cm4gdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgLy8gZnVuY3Rpb24gKCl7YWRkUG9wdXAub3BlbigpfSwgZmFsc2VcbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2hhbmRsZUxpa2UocmVzKSB7XG4gICAgaWYgKHRoaXMubGlrZXMgIT09IHJlcy5saWtlcykgdGhpcy5saWtlcyA9IHJlcy5saWtlcztcbiAgICB0aGlzLmxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5saWtlcy5sZW5ndGg7XG5cbiAgICB0aGlzLmxpa2VDb3VudGVyLnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLmxpa2VzLmxlbmd0aCA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIjtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcblxuICAgIHJldHVybiB0aGlzLmxpa2VzO1xuICB9XG5cbiAgX2Fzc2lnbkV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2spO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2RlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVTZXJ2ZXJEZWxldGUodGhpcy5jYXJkSUQpKTtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9zZXJ2ZXJMaWtlKHRoaXMuY2FyZElEKSk7XG4gIH1cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZElEO1xuICB9XG5cbiAgdG9vbHRpcENoZWNrID0gKGNhcmQpID0+IHtcbiAgICBjb25zdCB0b29sdGlwID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX292ZXJmbG93LXRvb2x0aXBcIik7XG4gICAgaWYgKHRvb2x0aXAub2Zmc2V0V2lkdGggPCB0b29sdGlwLnNjcm9sbFdpZHRoKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSh0b29sdGlwKTtcbiAgICAgIHRvb2x0aXAgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgY3JlYXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fY2xvbmVUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2Fzc2lnbkV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLmxpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtbGFiZWxcIik7XG5cbiAgICBpZiAodGhpcy5saWtlcykge1xuICAgICAgaWYgKHRoaXMubGlrZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIHRoaXMubGlrZUNvdW50ZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1sYWJlbFwiKS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgdGhpcy5saWtlcy5sZW5ndGg7XG5cbiAgICAgICAgaWYgKHRoaXMubGlrZXMuc29tZSgoZW50cnkpID0+IGVudHJ5Ll9pZCA9PT0gdGhpcy5fbXlJZCkpIHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX215SWQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9kZWxldGVcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fdGV4dDtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9O1xufVxuIiwiLy9Gb3JtVmFsaWRhdG9yIENsYXNzIC0gPiBBZGRlZFxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuICAvLzw8U1RBUlQ+PnB1YmxpYyBtZXRob2RzIG9mIGZvcm0gdmFsaWRhdGlvbi48PFNUQVJUPj5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9yZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpbnB1dFN0YXR1cyB9ID0gdGhpcy5fc2V0dGluZ3M7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9kZWFjdGl2YXRlRXJyb3IoaW5wdXQpO1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShgJHtpbnB1dFN0YXR1c31gKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jb250cm9sU3VibWl0KHRydWUpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG4gIC8vPDxFTkQ+PnB1YmxpYyBtZXRob2RzIG9mIGZvcm0gdmFsaWRhdGlvbi48PEVORD4+XG4gIC8vPDxTVEFSVD4+IEVycm9yIG1lc3NhZ2VzIGFuZCBidXR0b24gY29udHJvbHMgPDxTVEFSVD4+XG4gIF9kZWFjdGl2YXRlRXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvckZpZWxkID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yRmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckZpZWxkLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcbiAgX2FjdGl2YXRlRXJyb3IgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvckZpZWxkID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yRmllbGQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckZpZWxkLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcbiAgLy9Db250cm9scyB0aGUgc3RhdHVzIG9mIHRoZSBzdWJtaXQgYnV0dG9uLCBnZXRzIGZvcm0gaW5wdXRzIHN0YXR1cyBmcm9tIGNoZWNrSWZJbnB1dFZhbGlkXG4gIF9jb250cm9sU3VibWl0ID0gKGZvcm1TdGF0dXMpID0+IHtcbiAgICBjb25zdCB7IHN1Ym1pdFNlbGVjdG9yLCBkaXNhYmxlZEJ1dHRvbiB9ID0gdGhpcy5fc2V0dGluZ3M7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7c3VibWl0U2VsZWN0b3J9YCk7XG5cbiAgICBpZiAoZm9ybVN0YXR1cykge1xuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoZGlzYWJsZWRCdXR0b24pO1xuICAgICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShkaXNhYmxlZEJ1dHRvbik7XG4gICAgICBzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9O1xuICBfY2hlY2tJZklucHV0VmFsaWQgPSAoZXZ0KSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBldnQudGFyZ2V0O1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRTdGF0dXMpO1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlRXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZUVycm9yKGlucHV0KTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtU3RhdHVzID0gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGl0ZW0pID0+ICFpdGVtLnZhbGlkaXR5LnZhbGlkKTtcbiAgICByZXR1cm4gdGhpcy5fY29udHJvbFN1Ym1pdChmb3JtU3RhdHVzKTtcbiAgfTtcbiAgLy88PEVORD4+IEVycm9yIG1lc3NhZ2VzIGNvbnRyb2wgPDxFTkQ+PlxuICAvLzw8U1RBUlQ+PiBMaXN0ZW5lcnMgY29udHJvbCA8PFNUQVJUPj5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgZm9ybUlucHV0IH0gPSB0aGlzLl9zZXR0aW5ncztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Zm9ybUlucHV0fWApXG4gICAgKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCB0aGlzLl9yZXNldFZhbGlkYXRpb24pO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuX2NoZWNrSWZJbnB1dFZhbGlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfTtcblxuICAvLzw8RU5EPj4gTGlzdGVuZXJzIGNvbnRyb2wgPDxFTkQ+PlxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpLnBhcmVudE5vZGU7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgIHRoaXMudW5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmNvZGUgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZUJhY2tncm91bmRDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9hY3RpdmVcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9jbG9zZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVCYWNrZ3JvdW5kQ2xvc2UpO1xuICB9XG4gIHVuc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgc2V0RnVuY3Rpb24oZnVuYykge1xuICAgIHRoaXMuc2V0U3VibWl0SGFuZGxlciA9IGZ1bmM7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX3N1Ym1pdFwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNldFN1Ym1pdEhhbmRsZXIoKSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdEZvcm0gPSBzdWJtaXRIYW5kbGVyO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBnZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyA9ICh2YWx1ZXMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2lucHV0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlc1tgJHt0aGlzLl9pbnB1dExpc3RbaV0ubmFtZX1gXSlcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0W2ldLnZhbHVlID0gdmFsdWVzW2Ake3RoaXMuX2lucHV0TGlzdFtpXS5uYW1lfWBdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0O1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuaGFuZGxlU3VibWl0Rm9ybSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cEdhbGxlcnkgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2xlZnRBcnJvdyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubmF2aWdhdGlvbi1hcnJvd19sZWZ0XCIpO1xuICAgIHRoaXMuX3JpZ2h0QXJyb3cgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm5hdmlnYXRpb24tYXJyb3dfcmlnaHRcIik7XG4gICAgdGhpcy5faW1hZ2VXaW5kb3dQaG90byA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKTtcbiAgICB0aGlzLl9pbWFnZVdpbmRvd05hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wbGFjZS1uYW1lXCIpO1xuICB9XG5cbiAgb3BlbihldnQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgaWYgKGV2dCkge1xuICAgICAgY29uc3QgY2FyZCA9IGV2dC50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgIGNvbnN0IGNhcmRUZXh0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIik7XG4gICAgICBjb25zdCBjYXJkTGluayA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAgIHRoaXMuX2ltYWdlV2luZG93TmFtZS50ZXh0Q29udGVudCA9IGNhcmRUZXh0LnRleHRDb250ZW50O1xuICAgICAgdGhpcy5faW1hZ2VXaW5kb3dQaG90by5zcmMgPSBjYXJkTGluay5zcmM7XG4gICAgICB0aGlzLl9pbWFnZVdpbmRvd1Bob3RvLmFsdCA9IGBQaG90b2dyYXBoIG9mICR7Y2FyZFRleHQudGV4dENvbnRlbnR9YDtcbiAgICAgIHRoaXMuX25hdmlnYXRpb25Bc3NpZ24oY2FyZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ltYWdlV2luZG93UGhvdG8uc3JjID1cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waG90b1wiKS5zcmM7XG4gICAgICB0aGlzLl9pbWFnZVdpbmRvd1Bob3RvLmFsdCA9IFwiUHJvZmlsZSBwaG90b1wiO1xuICAgIH1cbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgc3dpdGNoIChldnQuY29kZSkge1xuICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICBpZiAodGhpcy5fbGVmdEFycm93KSB7XG4gICAgICAgICAgdGhpcy5fZ29MZWZ0KCk7XG4gICAgICAgICAgdGhpcy5fdG9nZ2xlQXJyb3codGhpcy5fbGVmdEFycm93KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgIGlmICh0aGlzLl9yaWdodEFycm93KSB7XG4gICAgICAgICAgdGhpcy5fZ29SaWdodCgpO1xuICAgICAgICAgIHRoaXMuX3RvZ2dsZUFycm93KHRoaXMuX3JpZ2h0QXJyb3cpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkVzY2FwZVwiOlxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuXG4gIF9uYXZpZ2F0aW9uQXNzaWduID0gKGNhcmQpID0+IHtcbiAgICAvL2lmIGNvbmRpdGlvbnMgZm9yIGV4Y2VwdGlvbnMgb2Ygbm8gc2libGluZyB0byBnbyB0byBzdGFydC9lbmQuXG4gICAgdGhpcy5jYXJkID0gY2FyZDtcbiAgICB0aGlzLl9sZWZ0Q2FyZCA9IGNhcmQucHJldmlvdXNFbGVtZW50U2libGluZyB8fCBjYXJkLnBhcmVudE5vZGUubGFzdENoaWxkO1xuICAgIHRoaXMuX3JpZ2h0Q2FyZCA9IGNhcmQubmV4dEVsZW1lbnRTaWJsaW5nIHx8IGNhcmQucGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICB9O1xuXG4gIF9nb0xlZnQoKSB7XG4gICAgdGhpcy5faW1hZ2VXaW5kb3dQaG90by5zcmMgPVxuICAgICAgdGhpcy5fbGVmdENhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmM7XG4gICAgdGhpcy5faW1hZ2VXaW5kb3dQaG90by5hbHQgPVxuICAgICAgdGhpcy5fbGVmdENhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQ7XG4gICAgdGhpcy5faW1hZ2VXaW5kb3dOYW1lLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX2xlZnRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKS50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9uYXZpZ2F0aW9uQXNzaWduKHRoaXMuX2xlZnRDYXJkKTsgLy9zZW5kcyBkYXRhIHRvIG5hdmlnYXRpb24gdG8gdXBkYXRlIGNhcmQgbG9jYXRpb24uXG4gIH1cbiAgX2dvUmlnaHQoKSB7XG4gICAgdGhpcy5faW1hZ2VXaW5kb3dQaG90by5zcmMgPVxuICAgICAgdGhpcy5fcmlnaHRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjO1xuICAgIHRoaXMuX2ltYWdlV2luZG93UGhvdG8uYWx0ID1cbiAgICAgIHRoaXMuX3JpZ2h0Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdDtcbiAgICB0aGlzLl9pbWFnZVdpbmRvd05hbWUudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fcmlnaHRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKS50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9uYXZpZ2F0aW9uQXNzaWduKHRoaXMuX3JpZ2h0Q2FyZCk7IC8vc2VuZHMgZGF0YSB0byBuYXZpZ2F0aW9uIHRvIHVwZGF0ZSBjYXJkIGxvY2F0aW9uLlxuICB9XG4gIC8vIHRvZ2dsZXMgdGhlIEFycm93IGFuaW1hdGlvbiBieSBhZGRpbmcgYW5kIHJlbW92aW5nIGNzcyBjbGFzcyBhbmQgdHVybmluZyBvbiB0cmFuc2l0aW9uIGZvciBpdCdzIGR1cmF0aW9uLlxuICBfdG9nZ2xlQXJyb3coZSkge1xuICAgIGUuY2xhc3NMaXN0LmFkZChcIm5hdmlnYXRpb24tYXJyb3dfYW5pbWF0ZWRcIik7XG4gICAgY29uc3QgZGVsYXlUaW1lID1cbiAgICAgIHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZShlKVtcInRyYW5zaXRpb25EdXJhdGlvblwiXSkgKiAxMDAwO1xuICAgIHNldFRpbWVvdXQoXG4gICAgICAoKSA9PiBlLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZpZ2F0aW9uLWFycm93X2FuaW1hdGVkXCIpLFxuICAgICAgZGVsYXlUaW1lXG4gICAgKTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGlmICh0aGlzLl9sZWZ0QXJyb3cpIHtcbiAgICAgIGlmICh0aGlzLl9yaWdodEFycm93KSB7XG4gICAgICAgIHRoaXMuX3JpZ2h0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2dvUmlnaHQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuX2xlZnRBcnJvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fZ29MZWZ0LmJpbmQodGhpcykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRDb250YWluZXIpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3RlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkQ29udGFpbmVyKTtcbiAgfVxuICByZW5kZXJJdGVtcyhhcnJheU9mSXRlbXMpIHtcbiAgICBhcnJheU9mSXRlbXNcbiAgICAgID8gYXJyYXlPZkl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3RlbmRlcmVyKGl0ZW0pKVxuICAgICAgOiB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl90ZW5kZXJlcihpdGVtKSk7XG4gIH1cblxuICAvL0kgZGlkIGl0IHNvIHlvdSBjYW4gY2hvb3NlIGlmIHlvdSB3YW50IHRvIHByZXBlbmQgb3IgYXBwZW5kIHRoZSBjYXJkIGVsZW1lbnQsIGRlZmF1bHQgaXMgcHJlcGVuZC5cbiAgYWRkSXRlbShlbGVtZW50LCBhdHRhY2hBdCkge1xuICAgIGlmIChhdHRhY2hBdCA9PSBcInByZXBlbmRcIiB8fCBhdHRhY2hBdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoYXR0YWNoQXQgPT0gXCJhcHBlbmRcIikge1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih1c2VybmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IsIHByb2ZpbGVJbWFnZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlcm5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSW1hZ2VTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGF0YSA9IHt9O1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fZGF0YS5hdmF0YXIgPSB0aGlzLl9hdmF0YXIuc3JjO1xuICAgIHRoaXMuX2RhdGEubmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fZGF0YS5hYm91dCA9IHRoaXMuX2Fib3V0LnRleHRDb250ZW50O1xuXG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyhuZXdEYXRhKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCwgYXZhdGFyLCBfaWQgfSA9IG5ld0RhdGE7XG5cbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIGlmIChhdmF0YXIpIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XG4gICAgaWYgKF9pZCkgdGhpcy5fZGF0YS5faWQgPSBfaWQ7XG5cbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgfVxufVxuIiwiZnVuY3Rpb24gZ2V0QnV0dG9uVGV4dChidXR0b25UZXh0LCB0YWlsKSB7XG4gIHJldHVybiAvXFx3KmVcXGIvLnRlc3QoYnV0dG9uVGV4dClcbiAgICA/IC9cXHcqZVxcYi8uZXhlYyhidXR0b25UZXh0KS50b1N0cmluZygpLnJlcGxhY2UoL1xcd1xcYi8sIHRhaWwpXG4gICAgOiBidXR0b24udGV4dENvbnRlbnQudG9TdHJpbmcoKSArIHRhaWw7XG59XG5cbmV4cG9ydCBjb25zdCBsb2FkZXIgPSAoe1xuICBkb3RzLFxuICBjb21wbGV0ZVRpbWVEZWxheSxcbiAgYnV0dG9uU2VsZWN0b3IgPSBcIi5wb3B1cF9hY3RpdmUgLmJ1dHRvbl90eXBlX3N1Ym1pdFwiLFxuICBjbGlja0hhbmRsZXIsXG4gIGNhbGxiYWNrRW5kID0gKCkgPT4ge30sXG4gIG9uRXJyb3IgPSAoKSA9PiB7fSxcbn0pID0+IHtcbiAgY29uc3QgeyBpbnRlcnZhbCwgY291bnQgfSA9IGRvdHM7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uU2VsZWN0b3IpO1xuICBjb25zdCBidXR0b25UZXh0ID0gYnV0dG9uLnRleHRDb250ZW50LnRvU3RyaW5nKCk7XG4gIGNvbnN0IGJ1dHRvblN0YXRlUHJvY2Vzc2luZyA9IGdldEJ1dHRvblRleHQoYnV0dG9uVGV4dCwgXCJpbmdcIik7XG4gIGNvbnN0IGJ1dHRvblN0YXRlQ29tcGxldGUgPSBnZXRCdXR0b25UZXh0KGJ1dHRvblRleHQsIFwiZWRcIik7XG5cbiAgY29uc3QgbG9vcCA9ICgpID0+IHtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPVxuICAgICAgYnV0dG9uLnRleHRDb250ZW50Lmxlbmd0aCA+IGJ1dHRvblN0YXRlUHJvY2Vzc2luZy5sZW5ndGggKyBjb3VudFxuICAgICAgICA/IGAke2J1dHRvblN0YXRlUHJvY2Vzc2luZ31gXG4gICAgICAgIDogYnV0dG9uLnRleHRDb250ZW50ICsgXCIuXCI7XG4gIH07XG4gIGxldCBpbnRlcnZhbENvbnRyb2xsZXIgPSBzZXRJbnRlcnZhbChsb29wLCBpbnRlcnZhbCk7XG5cbiAgY2xpY2tIYW5kbGVyKClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsQ29udHJvbGxlcik7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBgJHtidXR0b25TdGF0ZUNvbXBsZXRlfSBzdWNjZXNzZnVsbHlgO1xuICAgIH0pXG4gICAgLmNhdGNoKChyZXMpID0+IHtcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGBGYWlsZWRgO1xuICAgICAgc2V0VGltZW91dChcIlwiLCBjb21wbGV0ZVRpbWVEZWxheSAqIDIpO1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbENvbnRyb2xsZXIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrRW5kKCk7XG4gICAgICB9LCBjb21wbGV0ZVRpbWVEZWxheSk7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBgJHtidXR0b25UZXh0fWA7XG4gICAgICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgIH0sIGNvbXBsZXRlVGltZURlbGF5ICogMik7XG4gICAgfSk7XG59O1xuIiwiLy9UaG9zZSBhcmUgdGhlIHNlbGVjdG9ycyBmb3Igd2luZG93cyBhbmQgdGhlIGNhcmQgY29udGFpbmVyLlxuZXhwb3J0IGNvbnN0IGdhbGxlcnlXaW5kb3cgPSBcIiN3LWltZ1wiO1xuZXhwb3J0IGNvbnN0IGFkZFdpbmRvdyA9IFwiI3ctYWRkXCI7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVXaW5kb3cgPSBcIiN3LWVkaXRcIjtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVBpY3R1cmVXaW5kb3cgPSBcIiN3LWVkaXRwaWNcIjtcbmV4cG9ydCBjb25zdCBsYXJnZVByb2ZpbGVJbWFnZVdpbmRvdyA9IFwiI3ctcGljbHJnXCI7XG5leHBvcnQgY29uc3QgY2FyZENvbnRhaW5lciA9IFwiLmxvY2F0aW9uc1wiO1xuLy9idXR0b24gc2VsZWN0b3JzXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWVkaXRcIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmJ1dHRvbl90eXBlX2VkaXQtcHJvZmlsZS1pbWFnZVwiXG4pO1xuZXhwb3J0IGNvbnN0IGVubGFyZ2VJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmJ1dHRvbl90eXBlX2VubGFyZ2UtcHJvZmlsZS1pbWFnZVwiXG4pO1xuLy9mb3JtU2VsZWN0b3JzXG5leHBvcnQgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihlZGl0UHJvZmlsZVdpbmRvdylcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVBpY3R1cmVGb3JtID0gZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoZWRpdFByb2ZpbGVQaWN0dXJlV2luZG93KVxuICAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZFdpbmRvdykucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuLy9zZXR0aW5ncyBmb3IgdGhlIGZvcm1WYWxpZGF0b3JcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybUlucHV0OiBcImZvcm1fX2lucHV0XCIsXG4gIGlucHV0U3RhdHVzOiBcImZvcm1fX2lucHV0X3N0YXR1c1wiLFxuICBzdWJtaXRTZWxlY3RvcjogXCJidXR0b25fdHlwZV9zdWJtaXRcIixcbiAgZGlzYWJsZWRCdXR0b246IFwiYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JBY3RpdmU6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuLy9jYXJkIHRlbXBsYXRlIHNlbGVjdG9yLlxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wXCIpO1xuIiwiLy8gQXJyYXkgb2YgaW5pdGlhbCBjYXJkc1xuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJHYXNhZGFsdXIsIEZhcm9lIElzbGFuZHNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTIwNzY5NDkwOTE2LThjNzU0ZDUyYjhlMD9peGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTk1MCZxPTgwXCJcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJWxaluZyBUw6B1LCBCYSBSaWEgLSBWdW5nIFRhdSwgVmlldG5hbVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODM2NDc1MTU1NDItZjEyOWRkNjk3NjM4P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xOTU1JnE9ODBcIlxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlRvcnJlcyBkZWwgUGFpbmUgTmF0aW9uYWwgUGFyaywgQ2hpbGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDc4ODI3Mzg3Njk4LTE1Mjc3ODFhNDg4Nz9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTk1MCZxPTgwXCJcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJCdWRhcGVzdCwgSHVuZ2FyeVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NDEzNDM2NzI4ODUtOWJlNTYyMzYzMDJhP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02MzQmcT04MFwiXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiU2FuIFF1aXJpY28gZCdPcmNpYSwgSXRhbHlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE2MTA4MzE3NTA4LTY3ODhmNmExNjBlND9peGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTgzNCZxPTgwXCJcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllcywgSXRhbHlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDgyMTkyNTA1MzQ1LTU2NTVhZjg4OGNjND9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MjAwMCZxPTgwXCJcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJGdWppeW9zaGlkYSwgSmFwYW5cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTI2NDgxMjgwNjkzLTNiZmE3NTY4ZTBmMz9peGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTk1MSZxPTgwXCJcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJLeW90bywgSmFwYW5cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ1NTY5MzQxLTllYjhiMzA5NzlkOT9peGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTk1MCZxPTgwXCJcbiAgfSxcbl07XG5cbmV4cG9ydCB7aW5pdGlhbENhcmRzfTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vSW1wb3J0c1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi9zY3JpcHRzL2luaXRpYWxDYXJkcy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cEdhbGxlcnkgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBHYWxsZXJ5LmpzXCI7XG5pbXBvcnQgUG9wdXBDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybVwiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvIC5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7XG4gIHNldHRpbmdzLFxuICBhZGRCdXR0b24sXG4gIGVkaXRCdXR0b24sXG4gIGVubGFyZ2VJbWFnZUJ1dHRvbixcbiAgZWRpdEltYWdlQnV0dG9uLFxuICBnYWxsZXJ5V2luZG93LFxuICBhZGRXaW5kb3csXG4gIGVkaXRQcm9maWxlV2luZG93LFxuICBlZGl0UHJvZmlsZVBpY3R1cmVXaW5kb3csXG4gIGxhcmdlUHJvZmlsZUltYWdlV2luZG93LFxuICBjYXJkQ29udGFpbmVyLFxuICBjYXJkVGVtcGxhdGUsXG4gIGFkZEZvcm0sXG4gIGVkaXRGb3JtLFxuICBlZGl0UHJvZmlsZVBpY3R1cmVGb3JtLFxufSBmcm9tIFwiLi4vc2NyaXB0cy9jb25zdGFudHMuanNcIjtcbi8vbG9hZGVyIGlzIGEgY3VzdG9tIHNjcmlwdCBJJ3ZlIGNyZWF0ZWQgdG8gcHJvY2VzcyB0aGUgYnV0dG9uIHN0YXRlIHdoaWxlIGxvYWRpbmcgYW5kIGZpbmlzaGVkLlxuLy9MaXphIGZyb20gdGhlIGVkdWNhdGlvbmFsIHRlYW0gaGVscGVkIG1lIHRvIHJlZmFjdG9yIGl0J3MgY29kZSB0byBiZSByZXVzYWJsZS5cbmltcG9ydCB7IGxvYWRlciB9IGZyb20gXCIuL2xvYWRlci5qc1wiO1xuLy9UaGlzIGlzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5hdGUgaWYgdGhlIHRleHQgaW4gYSBjYXJkIG92ZXJmbG93cyBhbmQgYWRkIHRvb2x0aXAgYWNjb3JkaW5nbHkuXG5jb25zdCB0b29sdGlwQ2hlY2sgPSAocmVuZGVyZWRDYXJkKSA9PiB7XG4gIHJlbmRlcmVkQ2FyZDtcbiAgbGV0IHRvb2x0aXAgPSByZW5kZXJlZENhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19vdmVyZmxvdy10b29sdGlwXCIpO1xuICBsZXQgdGV4dCA9IHJlbmRlcmVkQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIik7XG4gIGlmICh0ZXh0Lm9mZnNldFdpZHRoIDwgdGV4dC5zY3JvbGxXaWR0aCkge1xuICAgIHRvb2x0aXAudGV4dENvbnRlbnQgPSB0ZXh0LnRleHRDb250ZW50O1xuICB9IGVsc2Uge1xuICAgIHRvb2x0aXAucmVtb3ZlKCk7XG4gICAgdG9vbHRpcCA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIHJlbmRlcmVkQ2FyZDtcbn07XG4vL0FwaSBvcHRpb25zXG5jb25zdCBvcHRpb25zID0ge1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvXCIsXG4gIGFwaUtleTogXCI2OTQ4M2NjMC0yZmQ0LTRkNDctYjU0OS1mZjdjMTNmNjdjODhcIixcbiAgZ3JvdXBJZDogXCJncm91cC0xMlwiLFxufTtcbi8vQXBpIGlzIGNyZWF0ZWQgaGVyZS5cbmNvbnN0IG1haW5BcGkgPSBuZXcgQXBpKG9wdGlvbnMpO1xuXG4vL0NyZWF0ZXMgYSB1c2VySW5mbyBvYmplY3QuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgXCIucHJvZmlsZV9fbmFtZVwiLFxuICBcIi5wcm9maWxlX19hYm91dFwiLFxuICBcIi5wcm9maWxlX19waG90b1wiXG4pO1xuXG4vL1RoaXMgdXBkYXRlcyB0aGUgcGFnZSB3aXRoIGZyb20gdGhlIHNlcnZlciBpbiBhIGNlcnRhaW4gb3JkZXJcblByb21pc2UuYWxsKFttYWluQXBpLmdldFByb2ZpbGUoKSwgbWFpbkFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pLnRoZW4oXG4gIChbdXNlckRhdGEsIGluaXRpYWxDYXJkc10pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcbiAgfVxuKTtcblxuLy9jYXJkUmVuZGVyaW5nIGZ1bmN0aW9uIHBhc3NlZCB0byBzZWN0aW9uIGNsYXNzIGZvciBjYXJkU2VjdGlvbiBhbmQgbmV3IGNhcmQgY3JlYXRvcnMuXG5jb25zdCBjb25maXJtV2luZG93ID0gbmV3IFBvcHVwQ29uZmlybShcIiN3LWNvbmZpcm1cIik7XG5jb25maXJtV2luZG93LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRSZW5kZXJlciA9IChuZXdDYXJkKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXG4gICAgbmV3Q2FyZCxcbiAgICBjYXJkVGVtcGxhdGUsXG4gICAgKGV2dCkgPT4ge1xuICAgICAgZ2FsbGVyeVBvcHVwLm9wZW4oZXZ0KTtcbiAgICB9LFxuICAgIChpZCkgPT4ge1xuICAgICAgY29uZmlybVdpbmRvdy5vcGVuKCk7XG4gICAgICBjb25maXJtV2luZG93LnNldEZ1bmN0aW9uKCgpID0+IHtcbiAgICAgICAgbG9hZGVyKHtcbiAgICAgICAgICBkb3RzOiB7XG4gICAgICAgICAgICBpbnRlcnZhbDogMTAwLFxuICAgICAgICAgICAgY291bnQ6IDQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wbGV0ZVRpbWVEZWxheTogMjUwLFxuICAgICAgICAgIGNhbGxiYWNrRW5kOiAoKSA9PiBjb25maXJtV2luZG93LmNsb3NlKCksXG4gICAgICAgICAgY2xpY2tIYW5kbGVyOiAoKSA9PlxuICAgICAgICAgICAgbWFpbkFwaS5kZWxldGVDYXJkUG9zdChpZCkudGhlbihjYXJkRWxlbWVudC5kZWxldGVDYXJkKCkpLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgKGlkKSA9PiB7XG4gICAgICBpZiAoY2FyZEVsZW1lbnQubGlrZXMuc29tZSgoZW50cnkpID0+IGVudHJ5Ll9pZCA9PSB1c2VySW5mby5fZGF0YS5faWQpKSB7XG4gICAgICAgIG1haW5BcGkuZGlzbGlrZVBob3RvKGlkKS50aGVuKChyZXMpID0+IGNhcmRFbGVtZW50Ll9oYW5kbGVMaWtlKHJlcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFpbkFwaS5saWtlUGhvdG8oaWQpLnRoZW4oKHJlcykgPT4gY2FyZEVsZW1lbnQuX2hhbmRsZUxpa2UocmVzKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICB1c2VySW5mby5fZGF0YS5faWRcbiAgKTtcbiAgY29uc3QgcmVuZGVyZWRDYXJkID0gY2FyZEVsZW1lbnQuY3JlYXRlQ2FyZCgpO1xuICByZXR1cm4gcmVuZGVyZWRDYXJkO1xufTtcblxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwRm9ybShlZGl0UHJvZmlsZVdpbmRvdywgKCkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhlZGl0UG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gIGxvYWRlcih7XG4gICAgZG90czoge1xuICAgICAgaW50ZXJ2YWw6IDQwLFxuICAgICAgY291bnQ6IDQsXG4gICAgfSxcbiAgICBjb21wbGV0ZVRpbWVEZWxheTogNDAwLFxuICAgIGNhbGxiYWNrRW5kOiAoKSA9PiBlZGl0UG9wdXAuY2xvc2UoKSxcbiAgICBjbGlja0hhbmRsZXI6ICgpID0+IG1haW5BcGkudXBkYXRlUHJvZmlsZShlZGl0UG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKSksXG4gIH0pO1xufSk7XG5cbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuLy9wb3B1cCBmb3IgZWRpdGluZyBwcm9maWxlIHBpY3R1cmUuXG5jb25zdCBlZGl0UGljV2luZG93ID0gbmV3IFBvcHVwRm9ybShlZGl0UHJvZmlsZVBpY3R1cmVXaW5kb3csICgpID0+IHtcbiAgbG9hZGVyKHtcbiAgICBkb3RzOiB7XG4gICAgICBpbnRlcnZhbDogNjAsXG4gICAgICBjb3VudDogNCxcbiAgICB9LFxuICAgIGNvbXBsZXRlVGltZURlbGF5OiA0MDAsXG4gICAgY2FsbGJhY2tFbmQ6ICgpID0+IGVkaXRQaWNXaW5kb3cuY2xvc2UoKSxcbiAgICBjbGlja0hhbmRsZXI6ICgpID0+XG4gICAgICBtYWluQXBpXG4gICAgICAgIC51cGRhdGVQcm9maWxlUGhvdG8oZWRpdFBpY1dpbmRvdy5nZXRJbnB1dFZhbHVlcygpLmF2YXRhcilcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdXNlckluZm8uc2V0VXNlckluZm8ocmVzKSksXG4gIH0pO1xufSk7XG5cbmVkaXRQaWNXaW5kb3cuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8vY3JlYXRlcyBwb3B1cCB3aXRoIGZvcm0gY29ycmVzcG9uZGluZyB0byBhZGQgYnV0dG9uIHdpdGggYSBjYWxsYmFjayBmdW5jdGlvbjtcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwRm9ybShhZGRXaW5kb3csICgpID0+IHtcbiAgbGV0IG5ld0NhcmQgPSBhZGRQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xuICBsb2FkZXIoe1xuICAgIGRvdHM6IHtcbiAgICAgIGludGVydmFsOiA2MCxcbiAgICAgIGNvdW50OiA0LFxuICAgIH0sXG4gICAgY29tcGxldGVUaW1lRGVsYXk6IDQwMCxcbiAgICBjbGlja0hhbmRsZXI6ICgpID0+XG4gICAgICBtYWluQXBpLnBvc3ROZXdDYXJkKG5ld0NhcmQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBuZXdDYXJkID0gY2FyZFJlbmRlcmVyKHJlcyk7XG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XG4gICAgICAgIHRvb2x0aXBDaGVjayhuZXdDYXJkKTtcbiAgICAgICAgYWRkUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pLFxuICB9KTtcbn0pO1xuXG5hZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0NyZWF0ZXMgdGhlIGdhbGxlcnkgcG9wdXBcbmNvbnN0IGdhbGxlcnlQb3B1cCA9IG5ldyBQb3B1cEdhbGxlcnkoZ2FsbGVyeVdpbmRvdyk7XG5nYWxsZXJ5UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8vY3JlYXRlcyB0aGUgZ2FsbGVyeVBvcHVwIHRvIG9wZW4gcHJvZmlsZSBpbWFnZS5cbmNvbnN0IHByb2ZpbGVMYXJnZSA9IG5ldyBQb3B1cEdhbGxlcnkobGFyZ2VQcm9maWxlSW1hZ2VXaW5kb3cpO1xucHJvZmlsZUxhcmdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLzw8U3RhcnQ+PiBmb3JtIFZhbGlkYXRpb24gPDxTdGFydD4+XG5jb25zdCBlZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZWRpdEZvcm0sIHNldHRpbmdzKTtcbmVkaXRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRGb3JtLCBzZXR0aW5ncyk7XG5hZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBlZGl0UGljVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZWRpdFByb2ZpbGVQaWN0dXJlRm9ybSwgc2V0dGluZ3MpO1xuZWRpdFBpY1ZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4vLzw8RU5EPj4gZm9ybSBWYWxpZGF0aW9uIDw8RU5EPj5cblxuLy9hZGRzIGNhcmQgc2VjdGlvblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChuZXdDYXJkKSA9PiB7XG4gICAgICBuZXdDYXJkID0gY2FyZFJlbmRlcmVyKG5ld0NhcmQpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLCBcImFwcGVuZFwiKTtcbiAgICAgIHRvb2x0aXBDaGVjayhuZXdDYXJkKTtcbiAgICB9LFxuICB9LFxuICBjYXJkQ29udGFpbmVyXG4pO1xuXG4vLzw8U1RBUlQ+PiBiYXNlIHBhZ2UgYnV0dG9uIGxpc3RlbmVycyA8PFNUQVJUPj5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xuICBlZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYWRkUG9wdXAub3BlbigpKTtcblxuZWRpdEltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRQaWNXaW5kb3cuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gIGVkaXRQaWNXaW5kb3cub3BlbigpO1xufSk7XG5cbmVubGFyZ2VJbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gcHJvZmlsZUxhcmdlLm9wZW4oKSk7XG5cbi8vPDxFTkQ+PiBiYXNlIHBhZ2UgYnV0dG9uIGxpc3RlbmVycyA8PEVORD4+XG4iXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImFyciIsImxlbiIsImxlbmd0aCIsImkiLCJhcnIyIiwiQXJyYXkiLCJfX2VzTW9kdWxlIiwiaXNBcnJheSIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwib2JqIiwidmFsdWUiLCJzdXBlclByb3BCYXNlIiwicmVxdWlyZSIsIl9nZXQiLCJwcm9wZXJ0eSIsInJlY2VpdmVyIiwiUmVmbGVjdCIsImdldCIsImJhc2UiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiY2FsbCIsIl9nZXRQcm90b3R5cGVPZiIsIm8iLCJzZXRQcm90b3R5cGVPZiIsImdldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJfaSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiX3MiLCJfZSIsIl9hcnIiLCJfbiIsIl9kIiwibmV4dCIsImRvbmUiLCJwdXNoIiwiZXJyIiwiX3R5cGVvZiIsImFzc2VydFRoaXNJbml0aWFsaXplZCIsIm5hbWUiLCJfc2V0UHJvdG90eXBlT2YiLCJwIiwiYXJyYXlXaXRoSG9sZXMiLCJpdGVyYWJsZVRvQXJyYXlMaW1pdCIsInVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5Iiwibm9uSXRlcmFibGVSZXN0Iiwib2JqZWN0IiwiaGFzT3duUHJvcGVydHkiLCJhcnJheUxpa2VUb0FycmF5IiwibWluTGVuIiwibiIsInRvU3RyaW5nIiwic2xpY2UiLCJmcm9tIiwidGVzdCIsImN1c3RvbUZldGNoIiwidXJsIiwicHJvcGVydGllcyIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIkFwaSIsImdyb3VwSWQiLCJhcGlLZXkiLCJiYXNlVXJsIiwidGhpcyIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiY2FyZERhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxpbmsiLCJjYXJkSWQiLCJhYm91dCIsIl9pZCIsImNvaG9ydCIsImF2YXRhckxpbmsiLCJhdmF0YXIiLCJDYXJkIiwic2VsZWN0VGVtcGxhdGUiLCJoYW5kbGVJbWFnZUNsaWNrIiwic2VydmVyRGVsZXRlIiwic2VydmVyTGlrZSIsIm15SWQiLCJjYXJkIiwidG9vbHRpcCIsIl9lbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm9mZnNldFdpZHRoIiwic2Nyb2xsV2lkdGgiLCJyZW1vdmUiLCJfY2xvbmVUZW1wbGF0ZSIsIl9hc3NpZ25FdmVudExpc3RlbmVycyIsImxpa2VDb3VudGVyIiwibGlrZXMiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJ0ZXh0Q29udGVudCIsInNvbWUiLCJlbnRyeSIsIl9teUlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiX293bmVySWQiLCJkaXNwbGF5IiwiY2FyZEltYWdlIiwic3JjIiwiX2xpbmsiLCJhbHQiLCJfdGV4dCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiY2FyZElEIiwiX2hhbmRsZVNlcnZlckRlbGV0ZSIsIl9zZXJ2ZXJMaWtlIiwib3duZXIiLCJ1bmRlZmluZWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwicmVzIiwidG9nZ2xlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiaW5wdXRTdGF0dXMiLCJfc2V0dGluZ3MiLCJfaW5wdXRMaXN0IiwiZm9yRWFjaCIsImlucHV0IiwiX2RlYWN0aXZhdGVFcnJvciIsIl9jb250cm9sU3VibWl0IiwiZXJyb3JGaWVsZCIsIm5leHRFbGVtZW50U2libGluZyIsImlucHV0RXJyb3JBY3RpdmUiLCJtZXNzYWdlIiwiZm9ybVN0YXR1cyIsInN1Ym1pdFNlbGVjdG9yIiwiZGlzYWJsZWRCdXR0b24iLCJzdWJtaXRCdXR0b24iLCJfZm9ybUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJldnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2FjdGl2YXRlRXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIml0ZW0iLCJmb3JtSW5wdXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJldmVudERlZmF1bHQiLCJfcmVzZXRWYWxpZGF0aW9uIiwiX2NoZWNrSWZJbnB1dFZhbGlkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY29kZSIsImNsb3NlIiwiY29udGFpbnMiLCJfcG9wdXAiLCJkb2N1bWVudCIsInBhcmVudE5vZGUiLCJfaGFuZGxlRXNjQ2xvc2UiLCJ1bnNldEV2ZW50TGlzdGVuZXJzIiwiYmluZCIsIl9oYW5kbGVCYWNrZ3JvdW5kQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBDb25maXJtIiwiZnVuYyIsInNldFN1Ym1pdEhhbmRsZXIiLCJQb3B1cEZvcm0iLCJzdWJtaXRIYW5kbGVyIiwidmFsdWVzIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9mb3JtIiwicmVzZXQiLCJfaW5wdXRWYWx1ZXMiLCJQb3B1cEdhbGxlcnkiLCJfbGVmdEFycm93IiwiX2dvTGVmdCIsIl90b2dnbGVBcnJvdyIsIl9yaWdodEFycm93IiwiX2dvUmlnaHQiLCJfbGVmdENhcmQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibGFzdENoaWxkIiwiX3JpZ2h0Q2FyZCIsImZpcnN0Q2hpbGQiLCJfaW1hZ2VXaW5kb3dQaG90byIsIl9pbWFnZVdpbmRvd05hbWUiLCJjYXJkVGV4dCIsImNhcmRMaW5rIiwiX25hdmlnYXRpb25Bc3NpZ24iLCJlIiwiZGVsYXlUaW1lIiwicGFyc2VGbG9hdCIsImdldENvbXB1dGVkU3R5bGUiLCJzZXRUaW1lb3V0IiwiU2VjdGlvbiIsImNhcmRDb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3RlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFycmF5T2ZJdGVtcyIsImVsZW1lbnQiLCJhdHRhY2hBdCIsInByZXBlbmQiLCJhcHBlbmQiLCJVc2VySW5mbyIsInVzZXJuYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJwcm9maWxlSW1hZ2VTZWxlY3RvciIsIl9uYW1lIiwiX2Fib3V0IiwiX2F2YXRhciIsIl9kYXRhIiwibmV3RGF0YSIsImdldEJ1dHRvblRleHQiLCJidXR0b25UZXh0IiwidGFpbCIsImV4ZWMiLCJyZXBsYWNlIiwiYnV0dG9uIiwiZG90cyIsImNvbXBsZXRlVGltZURlbGF5IiwiYnV0dG9uU2VsZWN0b3IiLCJjbGlja0hhbmRsZXIiLCJjYWxsYmFja0VuZCIsImludGVydmFsIiwib25FcnJvciIsImNvdW50IiwiYnV0dG9uU3RhdGVQcm9jZXNzaW5nIiwiYnV0dG9uU3RhdGVDb21wbGV0ZSIsImludGVydmFsQ29udHJvbGxlciIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImZpbmFsbHkiLCJhZGRXaW5kb3ciLCJlZGl0UHJvZmlsZVdpbmRvdyIsImVkaXRQcm9maWxlUGljdHVyZVdpbmRvdyIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJlZGl0SW1hZ2VCdXR0b24iLCJlbmxhcmdlSW1hZ2VCdXR0b24iLCJlZGl0Rm9ybSIsImVkaXRQcm9maWxlUGljdHVyZUZvcm0iLCJhZGRGb3JtIiwiY2FyZFRlbXBsYXRlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInIiLCJ0b1N0cmluZ1RhZyIsInRvb2x0aXBDaGVjayIsInJlbmRlcmVkQ2FyZCIsInRleHQiLCJtYWluQXBpIiwidXNlckluZm8iLCJhbGwiLCJnZXRQcm9maWxlIiwiZ2V0SW5pdGlhbENhcmRzIiwidXNlckRhdGEiLCJpbml0aWFsQ2FyZHMiLCJzZXRVc2VySW5mbyIsImNhcmRTZWN0aW9uIiwicmVuZGVySXRlbXMiLCJjb25maXJtV2luZG93Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkUmVuZGVyZXIiLCJuZXdDYXJkIiwiY2FyZEVsZW1lbnQiLCJnYWxsZXJ5UG9wdXAiLCJvcGVuIiwiaWQiLCJzZXRGdW5jdGlvbiIsImxvYWRlciIsImRlbGV0ZUNhcmRQb3N0IiwiZGVsZXRlQ2FyZCIsImRpc2xpa2VQaG90byIsIl9oYW5kbGVMaWtlIiwibGlrZVBob3RvIiwiY3JlYXRlQ2FyZCIsImVkaXRQb3B1cCIsImdldElucHV0VmFsdWVzIiwidXBkYXRlUHJvZmlsZSIsImVkaXRQaWNXaW5kb3ciLCJ1cGRhdGVQcm9maWxlUGhvdG8iLCJhZGRQb3B1cCIsInBvc3ROZXdDYXJkIiwiYWRkSXRlbSIsImdhbGxlcnlXaW5kb3ciLCJwcm9maWxlTGFyZ2UiLCJsYXJnZVByb2ZpbGVJbWFnZVdpbmRvdyIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRJbnB1dFZhbHVlcyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==